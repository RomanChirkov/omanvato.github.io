var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},e="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function g(){g=function(){};e.Symbol||(e.Symbol=ba)}var ba=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function k(){g();var a=e.Symbol.iterator;a||(a=e.Symbol.iterator=e.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return l(this)}});k=function(){}}function l(a){var b=0;return ca(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ca(a){k();a={next:a};a[e.Symbol.iterator]=function(){return this};return a}function m(a){k();var b=a[Symbol.iterator];return b?b.call(a):l(a)}var da=this;
function p(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function q(a,b){t.prototype[a]=b};function u(a){this.a=a}u.prototype.log=function(a){v(this.a,"debug")&&console.log(a)};function w(a,b){v(a.a,"debug")&&console.warn(b)}u.prototype.error=function(a){v(this.a,"debug")&&console.error(a)};function x(){this.a=[];this.b={}}function y(a,b){"string"===typeof b&&a.a.push(b)}function A(a,b){Array.isArray(b)&&b.forEach(function(b){return y(a,b)})}function B(a,b,c){"string"===typeof b&&(a.b[b]=c)};function ea(){this.c=new u(this);this.g={pingUrl:"https://collector.analytics.anvato.net",isEnabled:!1,isDisabledByUser:!1,debug:!1};this.a={};this.a.isLinear=!1;this.a.isOnAd=!1;this.a.isPlaying=!1;this.a.startAttemptTimestamp=-1;this.a.videoDuration=-1;this.b={};this.f={title:null,description:null,programName:null,seasonNumber:null,episodeNumber:null,thumbnail:null,eventStartTime:null,eventEndTime:null,videoSrc:null,videoType:null,publishedTime:null,duration:null};var a=new x,b=new x;B(b,"isLinear",
!0);var c=new x;y(c,"ad_start");var d=new x;B(d,"isOnAd",!0);var f=new x;y(f,"playing");var h=new x;y(h,"playing");B(h,"isLinear",!1);var n=new x;y(n,"video_start");var z=new x;A(z,["play_fail","video_start_fail"]);var r=new x;A(r,["bitrate_changed","playing","video_start"]);var G=new x;y(G,"bitrate_changed");C(this,"trackerId","t:id",a);C(this,"eventName","e:id",a);C(this,"clientTimestamp","ct",a);C(this,"assetId","a:id",a);C(this,"contentType","a:type",a);C(this,"streamType","a:stream_type",a);
C(this,"userId","u:id",a);C(this,"sessionId","s:id",a);C(this,"deviceType","d:type",a);C(this,"playerType","p:type",a);C(this,"playerVersion","p:ver",a);C(this,"trafficSource","src",a);C(this,"userLocation","u:loc",a);C(this,"eventType","l:event_type",b);C(this,"eventId","l:event_id",b);C(this,"channelId","l:channel_id",b);C(this,"adStitchId","ad:adst_id",c);C(this,"adId","ad:id",c);C(this,"adName","ad:ad_name",d);C(this,"adPodName","ad:pod_name",d);C(this,"adPodPosition","ad:pod_pos",d);C(this,"newSeconds",
"w:sec",f);C(this,"bitrate","q:bitrate",r,!1);C(this,"previousBitrate","q:p_bitrate",G,!1);C(this,"newHotSpots","w:hs",h);C(this,"startTime","q:start_time",n);C(this,"errorCode","err:code",z)}function C(a,b,c,d,f){a.b[b]={L:c,C:d,value:null,o:void 0===f?!0:f}}function v(a,b){if(b in a.g)return a.g[b];w(a.c,b+" is not a valid config parameter name");return null}function D(a,b,c){b in a.g?a.g[b]=c:w(a.c,b+" is not a valid config parameter name")}
function E(a,b){if(b)for(var c=m(Object.keys(b)),d=c.next();!d.done;d=c.next())d=d.value,D(a,d,b[d])}function F(a,b){if(b in a.b)return a.b[b].value;w(a.c,b+" is not a valid parameter name");return null}function H(a,b,c){b in a.b?a.b[b].value=c:w(a.c,b+" is not a valid parameter name")}function I(a,b){if(b)for(var c=m(Object.keys(b)),d=c.next();!d.done;d=c.next())d=d.value,H(a,d,b[d])}
function fa(a){for(var b={},c=m(Object.keys(a.b)),d=c.next();!d.done;d=c.next()){d=d.value;var f=a.b[d],h=F(a,"eventName");a:{var n=f.C;var z=a.a;if(n.a.length){for(var r=!1,G=m(n.a),P=G.next();!P.done;P=G.next())if(P.value===h){r=!0;break}if(!r){n=!1;break a}}h=m(Object.keys(n.b));for(r=h.next();!r.done;r=h.next())if(r=r.value,n.b[r]!==z[r]){n=!1;break a}n=!0}n&&(f.o||!f.o&&null!==f.value&&"undefined"!==typeof f.value&&""!==f.value)&&(b[d]=f.value)}return b}
function J(a,b){if(b in a.a)return a.a[b];w(a.c,b+" is not a valid player state name");return null}function K(a,b,c){b in a.a?a.a[b]=c:w(a.c,b+" is not a valid player state name")}function L(a,b,c){b in a.f?a.f[b]=c:w(a.c,b+" is not a valid metadata name")};function ha(a){this.b=a;this.c=[];this.a={j:!1,i:!0}}function M(a){for(var b=!1,c=m(Object.keys(a.a)),d=c.next();!d.done;d=c.next())d=d.value,b=b||a.a[d];b||N(a)}
function N(a){if(v(a.b,"isEnabled")&&!v(a.b,"isDisabledByUser"))for(;a.c.length;){var b=a.c.shift(),c=a.b,d={};if(b&&"object"===typeof b)for(var f=m(Object.keys(b)),h=f.next();!h.done;h=f.next()){h=h.value;var n=b[h];h in c.b?d[c.b[h].L]=n:d[h]=n}b=d;if("object"!==typeof b||null===b)b="";else{c=[];d=m(Object.keys(b));for(f=d.next();!f.done;f=d.next())n=f.value,f=b[n],h=null!==f&&"undefined"!==typeof f,n=encodeURIComponent(n),f=h?encodeURIComponent(String(f)):"",c.push(n+"="+f);b=c.join("&")}b=v(a.b,
"pingUrl")+"?"+b;(new Image).src=b}};function O(a){this.g=new u(a);this.a=a;this.f=0;this.b=new ha(this.a)}function Q(a,b,c,d){if(b&&c&&d){var f=a.a;c in f.f?f=f.f[c]:(w(f.c,c+" is not a valid metadata name"),f=null);if(null!==f){switch(typeof f){case "number":if(isNaN(f)){w(a.g,"Metadata value for "+c+" is NaN");return}break;case "string":if(!f){w(a.g,"Metadata value for "+c+" is empty");return}break;default:return}for(a=d.split(".");1<a.length;)c=a.shift(),c in b||(b[c]={}),b=b[c];b[a[0]]=f}}}
O.prototype.h=function(a){3<=this.f?(a=this.b,a.a.i=!1,M(a)):(this.f++,setTimeout(this.c.bind(this,a),1E3))};function R(a,b){H(a.a,"eventName",b);H(a.a,"clientTimestamp",Date.now());a=a.b;!a.a.i&&!v(a.b,"isEnabled")||v(a.b,"isDisabledByUser")||(a.c.push(fa(a.b)),M(a))}
O.prototype.c=function(a){var b=this,c=new XMLHttpRequest;c.addEventListener("load",function(){var a=c.response;a="string"===typeof a?JSON.parse(a):"object"===typeof a?a:null;delete a.trackerId;E(b.a,a);a=b.b;a.a.i=!1;M(a)});c.addEventListener("error",this.h.bind(this,a));c.addEventListener("abort",this.h.bind(this,a));c.open("GET","https://config.analytics.anvato.net/v1/trackers/"+a);c.send()};
function S(a,b){if(v(a.a,"isEnabled")&&!v(a.a,"isDisabledByUser")){var c={};switch(b){case "linear":var d="events";var f=encodeURIComponent(String(F(a.a,"eventId")));Q(a,c,"title","title");Q(a,c,"description","description");Q(a,c,"seasonNumber","customData.seasonNumber");Q(a,c,"episodeNumber","customData.episodeNumber");Q(a,c,"programName","customData.programName");Q(a,c,"thumbnail","contentImages.thumbnailImage.imageUrl");Q(a,c,"eventStartTime","startTime");Q(a,c,"eventEndTime","endTime");Q(a,c,
"publishedTime","publishedTime");Q(a,c,"duration","duration");break;case "vod":d="videos";f=encodeURIComponent(String(F(a.a,"assetId")));Q(a,c,"title","title");Q(a,c,"description","description");Q(a,c,"seasonNumber","customData.seasonNumber");Q(a,c,"episodeNumber","customData.episodeNumber");Q(a,c,"programName","customData.programName");Q(a,c,"thumbnail","contentImages.thumbnailImage.imageUrl");Q(a,c,"videoSrc","player.html5Player.videoSrc");Q(a,c,"videoType","player.html5Player.videoType");Q(a,c,
"publishedTime","publishedTime");Q(a,c,"duration","duration");break;default:return}"duration"in c&&(c.duration+="s");(b=v(a.a,"pingUrl"))&&"/"!==b[b.length-1]&&(b+="/");a="v1alpha/trackers/"+encodeURIComponent(String(F(a.a,"trackerId")))+"/"+d+"/"+f;f=new XMLHttpRequest;f.open("PUT",""+b+a);f.send(JSON.stringify(c))}}
O.prototype.l=function(a){var b=this.b;if(a)for(var c=0;c<b.c.length;c++){var d=b.c[c];if(d)for(var f=m(Object.keys(a)),h=f.next();!h.done;h=f.next())h=h.value,h in d&&(d[h]=a[h])}a=this.b;a.a.j=!1;M(a)};function ia(a,b){E(a.a,b);a=a.b;a.a.i=!1;M(a)};function T(a){this.b=a;this.a=new Uint8Array(new ArrayBuffer(13))}function U(a,b){if(!(0>b||99<b)){var c=Math.floor(b/8);a.a[c]|=1<<7-b%8}}function V(a,b){return 0==a.b?0:Math.max(0,Math.min(99,Math.round(b/a.b*99)))}
T.prototype.toString=function(){for(var a="",b=0;b<this.a.length;){var c=this.a[b++],d=this.a[b++],f=this.a[b++],h=c>>2;c=(c&3)<<4|d>>4;var n=(d&15)<<2|f>>6,z=f&63;isNaN(d)?n=z=64:isNaN(f)&&(z=64);a=a+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(z)}return a};function W(a,b){this.a=a;this.K=b;this.g=null;this.b=this.m=0;this.c=this.f=null}function ja(a){var b=Number(J(a.a,"videoDuration"));0<=b&&!J(a.a,"isLinear")?(a.f=new T(b),a.c=new T(b)):(a.f=null,a.c=null)}function ka(a){X(a);a.g=setTimeout(a.h.bind(a),1E4)}function X(a){clearInterval(a.g);a.g=null}
W.prototype.h=function(){var a=J(this.a,"isPlaying");X(this);a&&(0<Math.floor(this.b)&&(null!=this.c&&H(this.a,"newHotSpots",this.c.toString()),H(this.a,"newSeconds",Math.floor(this.b)),R(this.K,"playing"),this.b-=Math.floor(this.b),null!=this.c&&(this.c.a=new Uint8Array(new ArrayBuffer(13)))),a&&ka(this))};function Y(a){X(a);K(a.a,"isPlaying",!1)}function Z(a){K(a.a,"isPlaying",!0);null===a.g&&ka(a)}function la(a){X(a);a.b=0;ja(a)};function t(a,b,c){var d=this;this.a=new ea;this.h=new u(this.a);this.b=new O(this.a);this.c=new W(this.a,this.b);this.g=this.f=null;b.trackerId=a;I(this.a,b);c?ia(this.b,c):this.b.c(a);window.addEventListener("beforeunload",function(){-1<J(d.a,"startAttemptTimestamp")&&R(d.b,"exits_before_video_start");N(d.b.b)})}function ma(a,b,c){return a?new t(a,b,c):(console.error("[ERROR] CloudVideoAnalytics: Missing trackerId"),null)}p("module$exports$cloud$video$analytics$modules$Api.create",ma);
t.prototype.F=function(){return"1.0.0-alpha.4"};q("getVersion",t.prototype.F);
t.prototype.P=function(a){if("object"===typeof a&&null!==a){var b="linear"===a.streamType;if(!b||null!==F(this.a,"eventId")&&a.eventId===F(this.a,"eventId"))b||(c=this.b.b,c.a.j=!1,M(c),clearTimeout(this.f),this.f=null);else{var c=this.b.b;c.a.j=!0;M(c)}"duration"in a&&K(this.a,"videoDuration",Number(a.duration));a.assetId!==F(this.a,"assetId")&&(H(this.a,"bitrate",null),H(this.a,"previousBitrate",null));K(this.a,"isLinear",b);for(var d in a)d in this.a.f&&(L(this.a,d,a[d]),delete a[d]);I(this.a,
a);H(this.a,"contentType","main")}};q("setVideoContentMetadata",t.prototype.P);t.prototype.N=function(){R(this.b,"player_loaded")};q("playerLoaded",t.prototype.N);t.prototype.X=function(){K(this.a,"startAttemptTimestamp",Date.now())};q("videoStartTry",t.prototype.X);t.prototype.V=function(){var a=J(this.a,"startAttemptTimestamp");-1<a?H(this.a,"startTime",Date.now()-a):this.h.error("videoStartTry() must be called prior to videoStart()");K(this.a,"startAttemptTimestamp",-1);R(this.b,"video_start")};
q("videoStart",t.prototype.V);t.prototype.D=function(){var a=this;la(this.c);Z(this.c);R(this.b,"content_start");if(J(this.a,"isLinear"))this.f&&clearTimeout(this.f),this.f=setTimeout(function(){var b=a.b.b;b.a.j=!1;M(b);a.f=null},3E4);else{var b=this.g;this.g=F(this.a,"assetId");b!==this.g&&S(this.b,"vod")}};q("contentStart",t.prototype.D);t.prototype.W=function(a){Y(this.c);H(this.a,"errorCode",a);R(this.b,"video_start_fail")};q("videoStartFail",t.prototype.W);
t.prototype.M=function(a){Y(this.c);H(this.a,"errorCode",a);R(this.b,"play_fail")};q("playFail",t.prototype.M);t.prototype.O=function(){R(this.b,"rebuffer")};q("rebuffer",t.prototype.O);t.prototype.U=function(){R(this.b,"video_pause")};q("videoPause",t.prototype.U);t.prototype.T=function(){this.c.h();Y(this.c);R(this.b,"video_complete")};q("videoComplete",t.prototype.T);t.prototype.A=function(a){Y(this.c);K(this.a,"isOnAd",!0);H(this.a,"contentType","ad");I(this.a,a);R(this.b,"ad_start")};
q("adStart",t.prototype.A);t.prototype.u=function(){R(this.b,"ad_first_quarter")};q("adFirstQuarter",t.prototype.u);t.prototype.v=function(){R(this.b,"ad_second_quarter")};q("adSecondQuarter",t.prototype.v);t.prototype.B=function(){R(this.b,"ad_third_quarter")};q("adThirdQuarter",t.prototype.B);t.prototype.w=function(){R(this.b,"ad_skip");H(this.a,"contentType","main");K(this.a,"isOnAd",!1);Z(this.c)};q("adSkip",t.prototype.w);
t.prototype.s=function(){R(this.b,"ad_complete");H(this.a,"contentType","main");K(this.a,"isOnAd",!1);Z(this.c)};q("adComplete",t.prototype.s);t.prototype.G=function(){Y(this.c);R(this.b,"video_pause");R(this.b,"interaction_video_pause")};q("interactionVideoPause",t.prototype.G);t.prototype.J=function(){Y(this.c);R(this.b,"interaction_video_stop")};q("interactionVideoStop",t.prototype.J);t.prototype.H=function(){Z(this.c);R(this.b,"interaction_video_play")};q("interactionVideoPlay",t.prototype.H);
t.prototype.I=function(){R(this.b,"interaction_video_seek")};q("interactionVideoSeek",t.prototype.I);t.prototype.l=function(a){var b=F(this.a,"eventId");this.f&&(clearTimeout(this.f),this.f=null);for(var c in a)c in this.a.f&&(L(this.a,c,a[c]),delete a[c]);I(this.a,a);c=F(this.a,"eventId");null!==c&&c!==b&&S(this.b,"linear");this.b.l(a);R(this.b,"program_changed");R(this.b,"content_start")};q("programChanged",t.prototype.l);
t.prototype.R=function(a){if(!isNaN(a)){var b=F(this.a,"bitrate");H(this.a,"bitrate",a);b&&b!=a&&(H(this.a,"previousBitrate",b),R(this.b,"bitrate_changed"))}};q("updateBitrate",t.prototype.R);t.prototype.S=function(a){var b=this.c;if(0<=Number(J(b.a,"videoDuration"))&&!J(b.a,"isLinear")){b.f&&b.c||ja(b);for(var c=V(b.f,a),d=V(b.f,a-1);d<=c;d++)0===(0>d||99<d?0:b.f.a[Math.floor(d/8)]>>7-d%8&1)&&U(b.c,d);c=b.f;d=V(c,a);for(var f=V(c,a-1);f<=d;f++)U(c,f)}c=a-b.m;0<c&&2>=c&&(b.b+=c);b.m=a;10<b.b&&b.h()};
q("updatePlayerTime",t.prototype.S);t.prototype.enable=function(){D(this.a,"isDisabledByUser",!1)};q("enable",t.prototype.enable);t.prototype.disable=function(){D(this.a,"isDisabledByUser",!0)};q("disable",t.prototype.disable);p("CloudVideoAnalytics",t);p("CloudVideoAnalytics.create",ma);p("CloudVideoAnalytics.ContentType.AD","ad");p("CloudVideoAnalytics.ContentType.MAIN","main");p("CloudVideoAnalytics.DeviceType.APPLE_TV","apple_tv");p("CloudVideoAnalytics.DeviceType.CCAST","ccast");p("CloudVideoAnalytics.DeviceType.DESKTOP","desktop");p("CloudVideoAnalytics.DeviceType.FIRE_TV","fire_tv");p("CloudVideoAnalytics.DeviceType.MOBILE","mobile");p("CloudVideoAnalytics.DeviceType.ROKU","roku");
p("CloudVideoAnalytics.DeviceType.TABLET","tablet");p("CloudVideoAnalytics.ErrorCode.VIDEO_METADATA_LOAD_FAILED","a");p("CloudVideoAnalytics.ErrorCode.VIDEO_URL_MISSING","b");p("CloudVideoAnalytics.ErrorCode.VIDEO_URL_FAILED","c");p("CloudVideoAnalytics.ErrorCode.AUTH_FAILED","d");p("CloudVideoAnalytics.ErrorCode.AUTHZ_FAILED","e");p("CloudVideoAnalytics.ErrorCode.VIDEO_PROG_URL_FAILED","f");p("CloudVideoAnalytics.ErrorCode.VIDEO_TS_FAILED","g");
p("CloudVideoAnalytics.ErrorCode.VIDEO_PLAYBACK_ERROR","h");p("CloudVideoAnalytics.EventType.BEACON","beacon");p("CloudVideoAnalytics.EventType.UPID","upid");p("CloudVideoAnalytics.PlayerType.ANDROID","android");p("CloudVideoAnalytics.PlayerType.APPLE_TV","apple_tv");p("CloudVideoAnalytics.PlayerType.CCAST","ccast");p("CloudVideoAnalytics.PlayerType.FIRE_TV","fire_tv");p("CloudVideoAnalytics.PlayerType.IOS","ios");p("CloudVideoAnalytics.PlayerType.ROKU","roku");
p("CloudVideoAnalytics.PlayerType.TVOS","tvos");p("CloudVideoAnalytics.PlayerType.WEB","web");p("CloudVideoAnalytics.StreamType.LINEAR","linear");p("CloudVideoAnalytics.StreamType.VOD","vod");p("CloudVideoAnalytics.TrafficSource.DIRECT","direct");p("CloudVideoAnalytics.TrafficSource.DISCOVERY","discovery");p("CloudVideoAnalytics.TrafficSource.IN_APP","in_app");p("CloudVideoAnalytics.TrafficSource.ORGANIC_SEARCH","organic_search");p("CloudVideoAnalytics.TrafficSource.PAID_SEARCH","paid_search");
p("CloudVideoAnalytics.TrafficSource.REFERRAL","referral");p("CloudVideoAnalytics.TrafficSource.SECURE_SEARCH","secure_search");p("CloudVideoAnalytics.TrafficSource.SHARE","share");
