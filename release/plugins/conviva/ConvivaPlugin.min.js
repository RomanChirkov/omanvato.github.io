/*!
 * Anvato Universal Player v3.7.2
 * Copyright (c) 2022 Google LLC
 * For license information, see ConvivaPlugin.min.js.licenses.txt
 */!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=446)}({1:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(41))},10:function(e,t,n){var a=n(2);e.exports=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},100:function(e,t){t.f=Object.getOwnPropertySymbols},101:function(e,t,n){var a=n(38);e.exports=a("navigator","userAgent")||""},103:function(e,t,n){var a=n(3),r=n(49),i=a("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},104:function(e,t,n){var a=n(7),r=n(130),i=n(36),o=n(9);e.exports=function(e,t){for(var n=r(t),s=o.f,c=i.f,l=0;l<n.length;l++){var u=n[l];a(e,u)||s(e,u,c(t,u))}}},105:function(e,t,n){var a=n(1);e.exports=a},106:function(e,t,n){var a=n(72);e.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},11:function(e,t,n){"use strict";var a=n(4),r=n(2),i=n(60),o=n(6),s=n(20),c=n(8),l=n(63),u=n(81),_=n(57),d=n(3),E=n(77),f=d("isConcatSpreadable"),g=E>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),h=_("concat"),S=function(e){if(!o(e))return!1;var t=e[f];return void 0!==t?!!t:i(e)};a({target:"Array",proto:!0,forced:!g||!h},{concat:function(e){var t,n,a,r,i,o=s(this),_=u(o,0),d=0;for(t=-1,a=arguments.length;t<a;t++)if(i=-1===t?o:arguments[t],S(i)){if(d+(r=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,d++)n in i&&l(_,d,i[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(_,d++,i)}return _.length=d,_}})},110:function(e,t,n){var a=n(6),r=n(26),i=n(3)("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==r(e))}},111:function(e,t,n){var a=n(38);e.exports=a("document","documentElement")},123:function(e,t,n){var a=n(5);e.exports=function(e,t,n,r){try{return r?t(a(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&a(i.call(e)),t}}},124:function(e,t,n){var a=n(18);e.exports=function(e,t,n){for(var r in t)a(e,r,t[r],n);return e}},126:function(e,t,n){var a=n(24),r="["+n(127)+"]",i=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),s=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},127:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},130:function(e,t,n){var a=n(38),r=n(44),i=n(100),o=n(5);e.exports=a("Reflect","ownKeys")||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},131:function(e,t,n){var a=n(10),r=n(9),i=n(5),o=n(76);e.exports=a?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},132:function(e,t,n){"use strict";var a=n(10),r=n(1),i=n(62),o=n(18),s=n(7),c=n(26),l=n(94),u=n(43),_=n(2),d=n(48),E=n(44).f,f=n(36).f,g=n(9).f,h=n(126).trim,S=r.Number,p=S.prototype,T="Number"==c(d(p)),b=function(e){var t,n,a,r,i,o,s,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(43===(t=(l=h(l)).charCodeAt(0))||45===t){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(o=(i=l.slice(2)).length,s=0;s<o;s++)if((c=i.charCodeAt(s))<48||c>r)return NaN;return parseInt(i,a)}return+l};if(i("Number",!S(" 0o1")||!S("0b1")||S("+0x1"))){for(var v,m=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof m&&(T?_((function(){p.valueOf.call(n)})):"Number"!=c(n))?l(new S(b(t)),n,m):b(t)},y=a?E(S):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),R=0;y.length>R;R++)s(S,v=y[R])&&!s(m,v)&&g(m,v,f(S,v));m.prototype=p,p.constructor=m,o(r,"Number",m)}},134:function(e,t,n){var a=n(5),r=n(103),i=n(8),o=n(56),s=n(92),c=n(123),l=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,u,_){var d,E,f,g,h,S,p,T=o(t,n,u?2:1);if(_)d=e;else{if("function"!=typeof(E=s(e)))throw TypeError("Target is not iterable");if(r(E)){for(f=0,g=i(e.length);g>f;f++)if((h=u?T(a(p=e[f])[0],p[1]):T(e[f]))&&h instanceof l)return h;return new l(!1)}d=E.call(e)}for(S=d.next;!(p=S.call(d)).done;)if("object"==typeof(h=c(d,T,p.value,u))&&h&&h instanceof l)return h;return new l(!1)}).stop=function(e){return new l(!0,e)}},137:function(e,t,n){var a=n(1),r=n(75),i=a.WeakMap;e.exports="function"==typeof i&&/native code/.test(r(i))},139:function(e,t,n){var a=n(6);e.exports=function(e){if(!a(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},14:function(e,t,n){var a=n(70),r=n(18),i=n(140);a||r(Object.prototype,"toString",i,{unsafe:!0})},140:function(e,t,n){"use strict";var a=n(70),r=n(67);e.exports=a?{}.toString:function(){return"[object "+r(this)+"]"}},148:function(e,t,n){var a,r,i,o=n(1),s=n(2),c=n(26),l=n(56),u=n(111),_=n(74),d=n(149),E=o.location,f=o.setImmediate,g=o.clearImmediate,h=o.process,S=o.MessageChannel,p=o.Dispatch,T=0,b={},v=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},m=function(e){return function(){v(e)}},y=function(e){v(e.data)},R=function(e){o.postMessage(e+"",E.protocol+"//"+E.host)};f&&g||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++T]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},a(T),T},g=function(e){delete b[e]},"process"==c(h)?a=function(e){h.nextTick(m(e))}:p&&p.now?a=function(e){p.now(m(e))}:S&&!d?(i=(r=new S).port2,r.port1.onmessage=y,a=l(i.postMessage,i,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(R)||"file:"===E.protocol?a="onreadystatechange"in _("script")?function(e){u.appendChild(_("script")).onreadystatechange=function(){u.removeChild(this),v(e)}}:function(e){setTimeout(m(e),0)}:(a=R,o.addEventListener("message",y,!1))),e.exports={set:f,clear:g}},149:function(e,t,n){var a=n(101);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(a)},15:function(e,t,n){var a=n(10),r=n(9),i=n(42);e.exports=a?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},150:function(e,t,n){"use strict";var a=n(53),r=function(e){var t,n;this.promise=new e((function(e,a){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=a})),this.resolve=a(t),this.reject=a(n)};e.exports.f=function(e){return new r(e)}},18:function(e,t,n){var a=n(1),r=n(15),i=n(7),o=n(68),s=n(75),c=n(31),l=c.get,u=c.enforce,_=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||r(n,"name",t),u(n).source=_.join("string"==typeof t?t:"")),e!==a?(c?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=n:r(e,t,n)):l?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},186:function(e,t,n){"use strict";var a,r,i,o,s=n(4),c=n(45),l=n(1),u=n(38),_=n(212),d=n(18),E=n(124),f=n(52),g=n(82),h=n(6),S=n(53),p=n(83),T=n(26),b=n(75),v=n(134),m=n(95),y=n(61),R=n(148).set,C=n(213),A=n(214),N=n(215),I=n(150),P=n(216),M=n(31),O=n(62),w=n(3),U=n(77),F=w("species"),D="Promise",L=M.get,K=M.set,Y=M.getterFor(D),V=_,x=l.TypeError,G=l.document,k=l.process,Q=u("fetch"),B=I.f,j=B,H="process"==T(k),W=!!(G&&G.createEvent&&l.dispatchEvent),q=O(D,(function(){if(!(b(V)!==String(V))){if(66===U)return!0;if(!H&&"function"!=typeof PromiseRejectionEvent)return!0}if(c&&!V.prototype.finally)return!0;if(U>=51&&/native code/.test(V))return!1;var e=V.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[F]=t,!(e.then((function(){}))instanceof t)})),J=q||!m((function(e){V.all(e).catch((function(){}))})),z=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t,n){if(!t.notified){t.notified=!0;var a=t.reactions;C((function(){for(var r=t.value,i=1==t.state,o=0;a.length>o;){var s,c,l,u=a[o++],_=i?u.ok:u.fail,d=u.resolve,E=u.reject,f=u.domain;try{_?(i||(2===t.rejection&&te(e,t),t.rejection=1),!0===_?s=r:(f&&f.enter(),s=_(r),f&&(f.exit(),l=!0)),s===u.promise?E(x("Promise-chain cycle")):(c=z(s))?c.call(s,d,E):d(s)):E(r)}catch(e){f&&!l&&f.exit(),E(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&$(e,t)}))}},Z=function(e,t,n){var a,r;W?((a=G.createEvent("Event")).promise=t,a.reason=n,a.initEvent(e,!1,!0),l.dispatchEvent(a)):a={promise:t,reason:n},(r=l["on"+e])?r(a):"unhandledrejection"===e&&N("Unhandled promise rejection",n)},$=function(e,t){R.call(l,(function(){var n,a=t.value;if(ee(t)&&(n=P((function(){H?k.emit("unhandledRejection",a,e):Z("unhandledrejection",e,a)})),t.rejection=H||ee(t)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){R.call(l,(function(){H?k.emit("rejectionHandled",e):Z("rejectionhandled",e,t.value)}))},ne=function(e,t,n,a){return function(r){e(t,n,r,a)}},ae=function(e,t,n,a){t.done||(t.done=!0,a&&(t=a),t.value=n,t.state=2,X(e,t,!0))},re=function(e,t,n,a){if(!t.done){t.done=!0,a&&(t=a);try{if(e===n)throw x("Promise can't be resolved itself");var r=z(n);r?C((function(){var a={done:!1};try{r.call(n,ne(re,e,a,t),ne(ae,e,a,t))}catch(n){ae(e,a,n,t)}})):(t.value=n,t.state=1,X(e,t,!1))}catch(n){ae(e,{done:!1},n,t)}}};q&&(V=function(e){p(this,V,D),S(e),a.call(this);var t=L(this);try{e(ne(re,this,t),ne(ae,this,t))}catch(e){ae(this,t,e)}},(a=function(e){K(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=E(V.prototype,{then:function(e,t){var n=Y(this),a=B(y(this,V));return a.ok="function"!=typeof e||e,a.fail="function"==typeof t&&t,a.domain=H?k.domain:void 0,n.parent=!0,n.reactions.push(a),0!=n.state&&X(this,n,!1),a.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new a,t=L(e);this.promise=e,this.resolve=ne(re,e,t),this.reject=ne(ae,e,t)},I.f=B=function(e){return e===V||e===i?new r(e):j(e)},c||"function"!=typeof _||(o=_.prototype.then,d(_.prototype,"then",(function(e,t){var n=this;return new V((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Q&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return A(V,Q.apply(l,arguments))}}))),s({global:!0,wrap:!0,forced:q},{Promise:V}),f(V,D,!1,!0),g(D),i=u(D),s({target:D,stat:!0,forced:q},{reject:function(e){var t=B(this);return t.reject.call(void 0,e),t.promise}}),s({target:D,stat:!0,forced:c||q},{resolve:function(e){return A(c&&this===i?V:this,e)}}),s({target:D,stat:!0,forced:J},{all:function(e){var t=this,n=B(t),a=n.resolve,r=n.reject,i=P((function(){var n=S(t.resolve),i=[],o=0,s=1;v(e,(function(e){var c=o++,l=!1;i.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,i[c]=e,--s||a(i))}),r)})),--s||a(i)}));return i.error&&r(i.value),n.promise},race:function(e){var t=this,n=B(t),a=n.reject,r=P((function(){var r=S(t.resolve);v(e,(function(e){r.call(t,e).then(n.resolve,a)}))}));return r.error&&a(r.value),n.promise}})},187:function(e,t,n){var a=n(110);e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},188:function(e,t,n){var a=n(3)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(e){}}return!1}},194:function(e,t,n){"use strict";var a,r=n(4),i=n(36).f,o=n(8),s=n(187),c=n(24),l=n(188),u=n(45),_="".startsWith,d=Math.min,E=l("startsWith");r({target:"String",proto:!0,forced:!!(u||E||(a=i(String.prototype,"startsWith"),!a||a.writable))&&!E},{startsWith:function(e){var t=String(c(this));s(e);var n=o(d(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return _?_.call(t,a,n):t.slice(n,n+a.length)===a}})},2:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},20:function(e,t,n){var a=n(24);e.exports=function(e){return Object(a(e))}},212:function(e,t,n){var a=n(1);e.exports=a.Promise},213:function(e,t,n){var a,r,i,o,s,c,l,u,_=n(1),d=n(36).f,E=n(26),f=n(148).set,g=n(149),h=_.MutationObserver||_.WebKitMutationObserver,S=_.process,p=_.Promise,T="process"==E(S),b=d(_,"queueMicrotask"),v=b&&b.value;v||(a=function(){var e,t;for(T&&(e=S.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?o():i=void 0,e}}i=void 0,e&&e.enter()},T?o=function(){S.nextTick(a)}:h&&!g?(s=!0,c=document.createTextNode(""),new h(a).observe(c,{characterData:!0}),o=function(){c.data=s=!s}):p&&p.resolve?(l=p.resolve(void 0),u=l.then,o=function(){u.call(l,a)}):o=function(){f.call(_,a)}),e.exports=v||function(e){var t={fn:e,next:void 0};i&&(i.next=t),r||(r=t,o()),i=t}},214:function(e,t,n){var a=n(5),r=n(6),i=n(150);e.exports=function(e,t){if(a(e),r(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},215:function(e,t,n){var a=n(1);e.exports=function(e,t){var n=a.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},216:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},24:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},25:function(e,t,n){var a=n(64),r=n(24);e.exports=function(e){return a(r(e))}},26:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},27:function(e,t,n){"use strict";var a=n(4),r=n(65).indexOf,i=n(73),o=n(40),s=[].indexOf,c=!!s&&1/[1].indexOf(1,-0)<0,l=i("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?s.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},271:function(e,t,n){n(4)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},289:function(e,t){e.exports=function(e){function t(e){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",e)}try{"undefined"!=typeof execScript&&"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener?execScript(e):"undefined"!=typeof eval?eval.call(null,e):t("EvalError: No eval function available")}catch(e){t(e)}}},29:function(e,t){var n=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},3:function(e,t,n){var a=n(1),r=n(71),i=n(7),o=n(59),s=n(72),c=n(106),l=r("wks"),u=a.Symbol,_=c?u:u&&u.withoutSetter||o;e.exports=function(e){return i(l,e)||(s&&i(u,e)?l[e]=u[e]:l[e]=_("Symbol."+e)),l[e]}},31:function(e,t,n){var a,r,i,o=n(137),s=n(1),c=n(6),l=n(15),u=n(7),_=n(58),d=n(55),E=s.WeakMap;if(o){var f=new E,g=f.get,h=f.has,S=f.set;a=function(e,t){return S.call(f,e,t),t},r=function(e){return g.call(f,e)||{}},i=function(e){return h.call(f,e)}}else{var p=_("state");d[p]=!0,a=function(e,t){return l(e,p,t),t},r=function(e){return u(e,p)?e[p]:{}},i=function(e){return u(e,p)}}e.exports={set:a,get:r,has:i,enforce:function(e){return i(e)?r(e):a(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},33:function(e,t,n){"use strict";var a=n(18),r=n(5),i=n(2),o=n(88),s=RegExp.prototype,c=s.toString,l=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u="toString"!=c.name;(l||u)&&a(RegExp.prototype,"toString",(function(){var e=r(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?o.call(e):n)}),{unsafe:!0})},36:function(e,t,n){var a=n(10),r=n(93),i=n(42),o=n(25),s=n(43),c=n(7),l=n(97),u=Object.getOwnPropertyDescriptor;t.f=a?u:function(e,t){if(e=o(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return i(!r.f.call(e,t),e[t])}},38:function(e,t,n){var a=n(105),r=n(1),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(a[e])||i(r[e]):a[e]&&a[e][t]||r[e]&&r[e][t]}},4:function(e,t,n){var a=n(1),r=n(36).f,i=n(15),o=n(18),s=n(68),c=n(104),l=n(62);e.exports=function(e,t){var n,u,_,d,E,f=e.target,g=e.global,h=e.stat;if(n=g?a:h?a[f]||s(f,{}):(a[f]||{}).prototype)for(u in t){if(d=t[u],_=e.noTargetGet?(E=r(n,u))&&E.value:n[u],!l(g?u:f+(h?".":"#")+u,e.forced)&&void 0!==_){if(typeof d==typeof _)continue;c(d,_)}(e.sham||_&&_.sham)&&i(d,"sham",!0),o(n,u,d,e)}}},40:function(e,t,n){var a=n(10),r=n(2),i=n(7),o=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var n=[][e],l=!!i(t,"ACCESSORS")&&t.ACCESSORS,u=i(t,0)?t[0]:c,_=i(t,1)?t[1]:void 0;return s[e]=!!n&&!r((function(){if(l&&!a)return!0;var e={length:-1};l?o(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,u,_)}))}},41:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},42:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},43:function(e,t,n){var a=n(6);e.exports=function(e,t){if(!a(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!a(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!a(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},44:function(e,t,n){var a=n(99),r=n(69).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,r)}},443:function(e,t,n){n(289)(n(444))},444:function(e,t){e.exports='/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */\n!function(a,b){if("function"==typeof define&&define.amd?define(b):"object"==typeof exports&&(module.exports=b()),"undefined"!=typeof a){if(void 0!==a.Conviva)return;if(a.ConvivaLoading)return;a.ConvivaLoading=!0,\na.Conviva=b(),delete a.ConvivaLoading}}(this,function(){var a={};return function(){"use strict";var b={};!function(){var c=a.Client=function(b,g){function i(a,b){if(!(a instanceof d))throw new Error("clientSettings parameter should be an instance of ClientSettings.");\nif(!(b instanceof f))throw new Error("systemFactory parameter should be an instance of SystemFactory.");(a.gatewayUrl==d._httpsProtocol+d.defaultProductionGatewayDNS||a.gatewayUrl==d._httpProtocol+d.defaultProductionGatewayDNS)&&(this.defaultGatewayURLError=!0),\nthis._settings=a.clone(),this._systemFactory=b,this._systemFactory.configure("SDK",this._settings),this._exceptionCatcher=this._systemFactory.buildExceptionCatcher(),this._exceptionCatcher.runProtected("Client.init",function(){\nj._id=F.uinteger32(),j._logger=j._systemFactory.buildLogger(),j._logger.setModuleName("Client"),j.defaultGatewayURLError&&j._logger.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),\nj._logger.info("init(): url="+j._settings.gatewayUrl+" customerKey="+j._settings.customerKey),j._config=j._systemFactory.buildConfig(),j._config.load(),j._sessionFactory=j._systemFactory.buildSessionFactory(j,j._settings,j._config),\nj._logger.info("init(): done.")},function(a){throw new Error("Client constructor failed: "+a.message)})}var j=this;this.defaultGatewayURLError=!1,this._logger=null,this._sessionFactory=null,this._systemFactory=null,\nthis._globalSessionKey=-1,this._settings=null,this._systemSettings=null,this._exceptionCatcher=null,this._config=null,this._id=-1,this._released=!1,i.apply(this,arguments),this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",function(){\nj._logger.info("release()"),j._sessionFactory.cleanup(),j._sessionFactory=null,j._globalSessionKey=-1,j._logger=null,j._id=-1,j._exceptionCatcher=null,j._settings=null,j._systemSettings=null,j._systemFactory=null,\nj._released=!0})},this.createSession=function(a){var b=c.NO_SESSION_KEY;return this._released?b:null==a||a instanceof e?(this._exceptionCatcher.runProtected("Client.createSession",function(){b=j._sessionFactory.makeVideoSession(a,u.SESSION_TYPE.VIDEO);\n}),b):(j._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter"),b)},this.createAdSession=function(a,b){var d=c.NO_SESSION_KEY;return this._released?d:null==b||b instanceof e?(this._exceptionCatcher.runProtected("Client.createAdSession",function(){\nvar c=j._sessionFactory.getVideoSession(a);null!=c&&(null==b&&(b=new e),(null==b.applicationName||null==b.viewerId)&&(null==b.viewerId&&null!=c._contentMetadata.viewerId&&(b.viewerId=c._contentMetadata.viewerId),\nnull==b.applicationName&&null!=c._contentMetadata.applicationName&&(b.applicationName=c._contentMetadata.applicationName)),b.custom["c3.csid"]=C.ToString(c._id)),d=j._sessionFactory.makeVideoSession(b,u.SESSION_TYPE.AD);\n}),d):(j._logger.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter"),d)},this.reportError=function(b,c,d){return this._released?void 0:C.isValidString(c)?d!==a.Client.ErrorSeverity.FATAL&&d!==a.Client.ErrorSeverity.WARNING?void this._logger.error("reportError(): invalid error severity: "+d):void this._exceptionCatcher.runProtected("Client.reportError",function(){\nvar a=j._sessionFactory.getVideoSession(b);null!=a&&a.reportError(c,d)}):void this._logger.error("reportError(): invalid error message string: "+c)},this.updateContentMetadata=function(a,b){return this._released?void 0:b instanceof e?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",function(){\nvar c=j._sessionFactory.getVideoSession(a);if(null!=c){var d=b.clone();c.updateContentMetadata(d)}}):void j._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter");\n},this.detachPlayer=function(a){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",function(){var b=j._sessionFactory.getVideoSession(a);null!=b&&b.detachPlayer()})},this.attachPlayer=function(a,b){\nreturn this._released?void 0:b instanceof h?void this._exceptionCatcher.runProtected("Client.attachPlayer",function(){var c=j._sessionFactory.getVideoSession(a);null!=c&&c.attachPlayer(b)}):void j._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter");\n},this.contentPreload=function(a){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",function(){var b=j._sessionFactory.getVideoSession(a);null!=b&&b.contentPreload()})},this.contentStart=function(a){\nthis._released||this._exceptionCatcher.runProtected("Client.contentStart",function(){var b=j._sessionFactory.getVideoSession(a);null!=b&&b.contentStart()})},this.sendCustomEvent=function(a,b,d){return this._released?void 0:C.isValidString(b)?void this._exceptionCatcher.runProtected("Client.sendCustomEvent",function(){\nif(a==c.NO_SESSION_KEY){if(j._globalSessionKey<0){var f=new e;j._globalSessionKey=j._sessionFactory.makeGlobalSession(f,null)}a=j._globalSessionKey}var g=C.sanitizeStringToStringObject(d),h=j._sessionFactory.getSession(a);\nnull!=h&&h.sendCustomEvent(b,g)}):void j._logger.error("sendCustomEvent(): eventName parameter must be a valid string.")},this.adStart=function(a,b,d,e){return this._released?void 0:b!==c.AdStream.CONTENT&&b!==c.AdStream.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+b):d!==c.AdPlayer.CONTENT&&d!==c.AdPlayer.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+d):e!==c.AdPosition.BUMPER&&e!==c.AdPosition.PREROLL&&e!==c.AdPosition.MIDROLL&&e!==c.AdPosition.POSTROLL?void this._logger.error("adStart(): ignored, invalid value for adPosition parameter: "+e):void this._exceptionCatcher.runProtected("Client.adStart",function(){\nvar c=j._sessionFactory.getVideoSession(a);null!=c&&c.adStart(b,d,e)})},this.adEnd=function(a){this._released||this._exceptionCatcher.runProtected("Client.adEnd",function(){var b=j._sessionFactory.getVideoSession(a);\nnull!=b&&b.adEnd()})},this.cleanupSession=function(a){return this._released?void 0:a===c.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can\'t cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",function(){\nvar b=j._sessionFactory.getVideoSession(a);null!=b&&j._sessionFactory.cleanupSession(a)})},this.getAttachedPlayer=function(a){var b=null;return this._released?b:a===c.NO_SESSION_KEY?(this._logger.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"),\nb):(this._exceptionCatcher.runProtected("Client.getAttachedPlayer",function(){var c=j._sessionFactory.getVideoSession(a);null!=c&&(b=c.getPlayerStateManager())}),b)},this.isPlayerAttached=function(a){return this._released?!1:null!==this.getAttachedPlayer(a)?!0:!1;\n},this.getPlayerStateManager=function(){if(this._released)throw new Error("This instance of Conviva.Client has been released.");return new h(this._systemFactory)},this.releasePlayerStateManager=function(a){\nif(this._released)throw new Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",function(){a instanceof h&&a.release()})},\nthis.getSettings=function(){return this._settings},this.getId=function(){return this._id}};c.version="2.151.0.36981",c.NO_SESSION_KEY=-2,c.AdPosition={BUMPER:"BUMPER",PREROLL:"PREROLL",MIDROLL:"MIDROLL",\nPOSTROLL:"POSTROLL"},c.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},c.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},c.ErrorSeverity={FATAL:0,WARNING:1},c.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",\nSETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},c.AdTechnology={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},c.AdType={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",\nCOMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},c.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},c.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",\nCHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",\nWINDOWS_DEVICE:"WIN",XBOX:"XB"};var d=a.ClientSettings=function(a){function b(a){if(!C.isValidString(a))throw new Error("customerKey must be valid");this.customerKey=a}function c(a){if(C.isValidString(a)){\nvar b=a.split("://");if("cws.conviva.com"!=b[1]&&("https"==b[0]||"http"==b[0]))return a}return"https://"+e.customerKey+"."+d.defaultProductionGatewayDNS}var e=this;this._customerKey=null,C.defGet(this,"customerKey",function(){\nreturn this._customerKey}),C.defSet(this,"customerKey",function(a){C.isValidString(a)&&(this._customerKey=a)}),this._heartbeatInterval=d.defaultProductionHeartbeatInterval,C.defGet(this,"heartbeatInterval",function(){\nreturn this._heartbeatInterval}),C.defSet(this,"heartbeatInterval",function(a){if("number"==typeof a){var b=C.NumberToUnsignedInt(a);b===a&&(this._heartbeatInterval=b)}}),this._gatewayUrl=null,C.defGet(this,"gatewayUrl",function(){\nreturn this._gatewayUrl}),C.defSet(this,"gatewayUrl",function(a){C.isValidString(a)&&(this._gatewayUrl=a)}),b.apply(this,arguments),this.equals=function(a){return this.customerKey===a.customerKey&&this.gatewayUrl===a.gatewayUrl&&this.heartbeatInterval===a.heartbeatInterval;\n},this.clone=function(){var a=new d(this.customerKey);return a.gatewayUrl=c(this.gatewayUrl),a.heartbeatInterval=this.heartbeatInterval,a}};d.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com",\nd.defaultProductionGatewayUrl="https://cws.conviva.com",d.defaultProductionGatewayDNS="cws.conviva.com",d.defaultDevelopmentGatewayDNS="conviva.testonly.conviva.com",d._httpsProtocol="https://",d._httpProtocol="http://",\nd.defaultDevelopmentHeartbeatInterval=5,d.defaultProductionHeartbeatInterval=20;var e=a.ContentMetadata=function(){function a(){return this._assetName}function b(a){"string"==typeof a&&(this._assetName=a);\n}function c(){return this._custom}function d(a){"object"==typeof a&&(this._custom=C.sanitizeStringToStringObject(a))}function f(){return this._defaultResource}function g(a){"string"==typeof a&&(this._defaultResource=a);\n}function h(){return this._viewerId}function i(a){"string"==typeof a&&(this._viewerId=a)}function j(){return this._applicationName}function k(a){"string"==typeof a&&(this._applicationName=a)}function l(){\nreturn this._streamUrl}function m(a){"string"==typeof a&&(this._streamUrl=a)}function n(){return this._streamType}function o(a){(a===e.StreamType.UNKNOWN||a===e.StreamType.VOD||a===e.StreamType.LIVE)&&(this._streamType=a);\n}function p(){return this._duration}function q(a){this._duration=G.sanitizeSpecialIntegerValue(a)}function r(){return this._encodedFrameRate}function s(a){this._encodedFrameRate=G.sanitizeSpecialIntegerValue(a);\n}function t(){}this._assetName=null,C.defGet(this,"assetName",a),C.defSet(this,"assetName",b),this._custom={},C.defGet(this,"custom",c),C.defSet(this,"custom",d),this._defaultResource=null,C.defGet(this,"defaultResource",f),\nC.defSet(this,"defaultResource",g),this._viewerId=null,C.defGet(this,"viewerId",h),C.defSet(this,"viewerId",i),this._applicationName=null,C.defGet(this,"applicationName",j),C.defSet(this,"applicationName",k),\nthis._streamUrl=null,C.defGet(this,"streamUrl",l),C.defSet(this,"streamUrl",m),this._streamType=e.StreamType.UNKNOWN,C.defGet(this,"streamType",n),C.defSet(this,"streamType",o),this._duration=-1,C.defGet(this,"duration",p),\nC.defSet(this,"duration",q),this._encodedFrameRate=-1,C.defGet(this,"encodedFrameRate",r),C.defSet(this,"encodedFrameRate",s),t.apply(this,arguments),this.clone=function(){var a=new e;a.assetName=this.assetName,\na.applicationName=this.applicationName,a.streamUrl=this.streamUrl,a.viewerId=this.viewerId,a.defaultResource=this.defaultResource,a.streamType=this.streamType,a.duration=this.duration,a.encodedFrameRate=this.encodedFrameRate;\nfor(var b in this.custom)a.custom[b]=this.custom[b];return a}};e.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"};var f=(a.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",\nERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",\nERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},a.Events={\nAD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",\nAD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",\nAD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",\nPOD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},a.SystemFactory=function(a,b){function c(a,b){if(!(a instanceof m))throw new Error("systemInterface parameter should be an instance of SystemInterface.");\nthis._systemInterface=a,this._timeInterface=this._systemInterface._timeInterface,this._timerInterface=this._systemInterface._timerInterface,this._httpInterface=this._systemInterface._httpInterface,this._storageInterface=this._systemInterface._storageInterface,\nthis._metadataInterface=this._systemInterface._metadataInterface,this._loggingInterface=this._systemInterface._loggingInterface,b instanceof g?this._settings=b.clone():this._settings=new g}var d=this;c.apply(this,arguments),\nthis.configure=function(a,b){this._packageName=a,this._clientSettings=b},this.release=function(){this._systemInterface.release(),this._systemInterface=null,this._packageName=null,this._settings=null,this._logBuffer=null;\n};var e={build:function(){return new I(d._loggingInterface,d._timeInterface,d.getSettings(),d._logBuffer,d._packageName)}};this.buildLogger=function(){return e.build()},this.buildSessionFactory=function(a,b,c){\nreturn new w(a,b,c,this)},this.buildPing=function(){return new E(this.buildLogger(),this.buildHttpClient(),this._clientSettings)},this.buildCallbackWithTimeout=function(){return new x(this.buildTimer());\n},this.buildCallbackWithTimeoutNoPing=function(){var a=null,b=new A(this.buildLogger(),a,this.getSettings()),c=new M(this.buildLogger(),this._timerInterface,b);return new x(c)},this.buildHttpClient=function(){\nreturn new H(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())},this.buildExceptionCatcher=function(){return new A(this.buildLogger(),this.buildPing(),this.getSettings());\n},this.buildTime=function(){return new L(this._timeInterface,this.buildLogger())},this.buildTimer=function(){return new M(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())},this.buildStorage=function(){\nreturn new J(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())},this.buildConfig=function(){return new y(this.buildLogger(),this.buildStorage(),this.buildJsonInterface());\n},this.buildSystemMetadata=function(){return new K(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())},this.buildCwsProtocol=function(){return new r},this.buildGatewayControl=function(a){\nreturn new B(a,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())},this.buildCwsSession=function(a,b,c){var d=this.buildGatewayControl(b);return new u(this.buildEventQueue(),a,b,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),d,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),c);\n},this.buildSession=function(a,b,c,d,e,f){var g=this.buildExceptionCatcher(),h=this.buildLogger(),i=b.clone(),j=this.buildCwsSession(a,i,c);return new v(d,e,f,c,this.buildSystemMetadata(),j,g,h)},this.buildEventQueue=function(){\nreturn new z},this.buildJsonInterface=function(){return new s},this.getLogBuffer=function(){return this._logBuffer},this.getSettings=function(){return this._settings},this._logBuffer=new D}),g=a.SystemSettings=function(){\nfunction a(){}this._logLevel=g.defaultProductionLogLevel,C.defGet(this,"logLevel",function(){return this._logLevel}),C.defSet(this,"logLevel",function(a){if("number"==typeof a){var b=C.NumberToUnsignedInt(a);\nb===a&&b>=g.LogLevel.DEBUG&&b<=g.LogLevel.ERROR&&(this._logLevel=b)}}),this._allowUncaughtExceptions=g.defaultProductionAllowUncaughtExceptions,C.defGet(this,"allowUncaughtExceptions",function(){return this._allowUncaughtExceptions;\n}),C.defSet(this,"allowUncaughtExceptions",function(a){C.isBoolean(a)&&(this._allowUncaughtExceptions=a)}),this._storageTimeout=g.defaultStorageTimeout,C.defGet(this,"storageTimeout",function(){return this._storageTimeout;\n}),C.defSet(this,"storageTimeout",function(a){if("number"==typeof a){var b=C.NumberToUnsignedInt(a);b===a&&(this._storageTimeout=b)}}),this._httpTimeout=g.defaultHttpTimeout,C.defGet(this,"httpTimeout",function(){\nreturn this._httpTimeout}),C.defSet(this,"httpTimeout",function(a){if("number"==typeof a){var b=C.NumberToUnsignedInt(a);b===a&&(this._httpTimeout=b)}}),a.apply(this,arguments),this.equals=function(a){\nreturn this.logLevel===a.logLevel&&this.allowUncaughtExceptions===a.allowUncaughtExceptions&&this.storageTimeout===a.storageTimeout&&this.httpTimeout===a.httpTimeout},this.clone=function(){var a=new g;return a.logLevel=this.logLevel,\na.allowUncaughtExceptions=this.allowUncaughtExceptions,a.storageTimeout=this.storageTimeout,a.httpTimeout=this.httpTimeout,a}};g.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},g.defaultDevelopmentLogLevel=g.LogLevel.DEBUG,\ng.defaultProductionLogLevel=g.LogLevel.ERROR,g.defaultDevelopmentAllowUncaughtExceptions=!0,g.defaultProductionAllowUncaughtExceptions=!1,g.defaultStorageTimeout=10,g.defaultHttpTimeout=10;var h=a.PlayerStateManager=function(c){\nfunction d(a){e._systemFactory=a,e._logger=e._systemFactory.buildLogger(),e._logger.setModuleName("PlayerStateManager"),e._exceptionCatcher=e._systemFactory.buildExceptionCatcher()}var e=this;e._monitorNotifier=null,\ne._bitrateKbps=-2,e._playerState=h.PlayerState.UNKNOWN,e._currentMetadata={},e._renderedFrameRate=-2,e._encodedFrameRate=-2,e._duration=-2,e._playerVersion=null,e._playerType=null,e._streamUrl=null,e._moduleName=null,\ne._moduleVersion=null,e._width=-1,e._height=-1,e._connectionType=null,e._linkEncryption=null,e._lastError=null,e._pendingErrors=[],e._released=!1,this.release=function(){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.release",function(){\nnull!=e._monitorNotifier&&e._monitorNotifier.onRelease(),e.removeMonitoringNotifier(),e._systemFactory=null,e._logger=null,e._exceptionCatcher=null,e._released=!0})},this.setPlayheadTime=function(a){},\nthis.setBufferLength=function(a){},this.setRenderedFrameRate=function(a){},this.getEncodedFrameRate=function(){return e._encodedFrameRate},this.setEncodedFrameRate=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",function(){\nvar b=G.sanitizeSpecialIntegerValue(a);b>=-1&&(e._encodedFrameRate=b,null!=e._monitorNotifier&&e._monitorNotifier.onEncodedFrameRateChange(e._encodedFrameRate))})},this.getDuration=function(){return e._duration;\n},this.setClientMeasureInterface=function(b){C.validateInterface(b,new a.ClientMeasureInterface,"ClientMeasureInterface"),this._playerInterface=b},this.getPHT=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getPHT?this._playerInterface.getPHT():h.DEFAULT_PHT;\n},this.getBufferLength=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getBufferLength?this._playerInterface.getBufferLength():h.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){\nreturn this._playerInterface&&"function"==typeof this._playerInterface.getSignalStrength?this._playerInterface.getSignalStrength():h.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this._playerInterface&&"function"==typeof this._playerInterface.getRenderedFrameRate?this._playerInterface.getRenderedFrameRate():h.DEFAULT_RENDERED_FRAME_RATE;\n},this.setDuration=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setDuration",function(){var b=G.sanitizeSpecialIntegerValue(a);b>=-1&&(e._duration=b,null!=e._monitorNotifier&&e._monitorNotifier.onContentLengthChange(e._duration));\n})},this.getStreamUrl=function(){return e._streamUrl},this.setStreamUrl=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",function(){null!=a&&(e._streamUrl=a,null!=e._monitorNotifier&&e._monitorNotifier.onStreamUrlChange(e._streamUrl));\n})},this.getModuleName=function(){return e._moduleName},this.getModuleVersion=function(){return e._moduleVersion},this.setModuleNameAndVersion=function(a,b){e._moduleName=a,e._moduleVersion=b},this.getPlayerType=function(){\nreturn e._playerType},this.setPlayerType=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",function(){e._playerType=a,null!=e._monitorNotifier&&e._monitorNotifier.onPlayerTypeChange(e._playerType);\n})},this.getPlayerVersion=function(){return e._playerVersion},this.setPlayerVersion=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",function(){e._playerVersion=a,\nnull!=e._monitorNotifier&&e._monitorNotifier.onPlayerVersionChange(e._playerVersion)})},this.setMonitoringNotifier=function(a,b){return e._released?void 0:null!=e._monitorNotifier?!1:(e._monitorNotifier=a,\ne._logger.setSessionId(b),!0)},this.removeMonitoringNotifier=function(){e._released||(e._monitorNotifier=null,e._logger.setSessionId(null))},this.pushCurrentState=function(){e.setPlayerState(e.getPlayerState()),\ne.setBitrateKbps(e.getBitrateKbps()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.getPlayerType()),e.setPlayerVersion(e.getPlayerVersion());\nfor(var a=0;a<e._pendingErrors.length;a++){var b=e._pendingErrors[a];e.setError(b)}e._pendingErrors=[]},this.getPlayerState=function(){return e._playerState},this.setPlayerState=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",function(){\nh.isValidPlayerState(a)?(e._playerState=a,null!=e._monitorNotifier&&e._monitorNotifier.onPlayerStateChange(e._playerState)):e._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+a)})},\nthis.getBitrateKbps=function(){return e._bitrateKbps},this.setBitrateKbps=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",function(){var b=G.sanitizeSpecialIntegerValue(a);\nb>=-1&&(e._bitrateKbps=b,null!=e._monitorNotifier&&e._monitorNotifier.onBitrateChange(e._bitrateKbps))})},this.setPlayerSeekStart=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekStart()",function(){\nnull!=e._monitorNotifier&&e._monitorNotifier.onSeekEvent(h.SEEK_ACTIONS_TYPE.SEEK_START,a)})},this.setPlayerSeekEnd=function(){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setPlayerSeekEnd()",function(){\nnull!=e._monitorNotifier&&e._monitorNotifier.onSeekEvent(h.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",function(){\nnull!=e._monitorNotifier&&e._monitorNotifier.onSeekEvent(h.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",function(){\nnull!=e._monitorNotifier&&e._monitorNotifier.onSeekEvent(h.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionWidth()",function(){\nvar b=G.sanitizeSpecialIntegerValue(a);b>0&&(e._width=b),null!=e._monitorNotifier&&e._monitorNotifier.onStreamResolutionWidthChange(e._width)})},this.setVideoResolutionHeight=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setVideoResolutionHeight()",function(){\nvar b=G.sanitizeSpecialIntegerValue(a);b>0&&(e._height=b),null!=e._monitorNotifier&&e._monitorNotifier.onStreamResolutionHeightChange(e._height)})},this.setConnectionType=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setConnectionType()",function(){\ne._connectionType=a,null!=e._monitorNotifier&&e._monitorNotifier.onConnectionTypeChange(e._connectionType)})},this.setLinkEncryption=function(a){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.setLinkEncryption()",function(){\ne._linkEncryption=a,null!=e._monitorNotifier&&e._monitorNotifier.onLinkEncryptionChange(e._linkEncryption)})},this.setSignalStrength=function(a){},this.setError=function(a){if(e._lastError=a,null!=e._monitorNotifier){\nvar b=a.errorCode,c=a.severity;e._monitorNotifier.onError(b,c)}else e._pendingErrors.push(a)},this.sendError=function(a,c){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.sendError",function(){\nvar d=new b.StreamerError(a,c);e.setError(d)})},this.reset=function(){e._released||e._exceptionCatcher.runProtected("PlayerStateManager.reset",function(){e._bitrateKbps=-2,e._playerState=h.PlayerState.UNKNOWN,\ne._currentMetadata={},e._renderedFrameRate=-1,e._encodedFrameRate=-1,e._duration=-1,e._playerVersion=null,e._playerType=null,e._streamUrl=null,e._lastError=null,e._pendingErrors=[]})},this.getError=function(){\nreturn e._lastError},d.apply(e,arguments),h.DEFAULT_SIGNAL_STRENGTH=1e3,h.DEFAULT_RENDERED_FRAME_RATE=-1,h.DEFAULT_BUFFER_LENGTH=-1,h.DEFAULT_PHT=-1};h.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",\nBUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},h.isValidPlayerState=function(a){return a===h.PlayerState.STOPPED||a===h.PlayerState.PLAYING||a===h.PlayerState.BUFFERING||a===h.PlayerState.PAUSED||a===h.PlayerState.UNKNOWN||a===h.PlayerState.NOT_MONITORED?!0:!1;\n},h.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"};var i=(a.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},\nthis.getRenderedFrameRate=function(){}},a.HttpInterface=function(){this.makeRequest=function(a,b,c,d,e,f){},this.release=function(){}}),j=a.LoggingInterface=function(){this.consoleLog=function(a,b){},this.release=function(){};\n},k=a.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},\nthis.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},\nthis.getDeviceCategory=function(){},this.release=function(){}},l=a.StorageInterface=function(){this.saveData=function(a,b,c,d){},this.loadData=function(a,b,c){},this.release=function(){}},m=a.SystemInterface=function(a,b,c,d,e,f){\nfunction g(a,b,c,d,e,f){C.validateInterface(a,new n,"TimeInterface"),C.validateInterface(b,new o,"TimerInterface"),C.validateInterface(c,new i,"HttpInterface"),C.validateInterface(d,new l,"StorageInterface"),\nC.validateInterface(e,new k,"MetadataInterface"),C.validateInterface(f,new j,"LoggingInterface"),this._timeInterface=a,this._timerInterface=b,this._httpInterface=c,this._storageInterface=d,this._metadataInterface=e,\nthis._loggingInterface=f}g.apply(this,arguments),this.release=function(){this._timeInterface.release(),this._timeInterface=null,this._timerInterface.release(),this._timerInterface=null,this._httpInterface.release(),\nthis._httpInterface=null,this._storageInterface.release(),this._storageInterface=null,this._metadataInterface.release(),this._metadataInterface=null,this._loggingInterface.release(),this._loggingInterface=null;\n}},n=a.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},o=a.TimerInterface=function(){this.createTimer=function(a,b,c){},this.release=function(){}},p=b.JSON2={};!function(){\nfunction a(a){return 10>a?"0"+a:a}function b(a){return d.lastIndex=0,d.test(a)?\'"\'+a.replace(d,function(a){var b=g[a];return"string"==typeof b?b:"\\\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+\'"\':\'"\'+a+\'"\';\n}function c(a,d){var g,i,j,k,l,m=e,n=d[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof h&&(n=h.call(d,a,n)),typeof n){case"string":return b(n);case"number":\nreturn isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(e+=f,l=[],Object.prototype.toString.apply(n)===Object.prototype.toString.apply([])){for(k=n.length,\ng=0;k>g;g+=1)l[g]=c(g,n)||"null";return j=0===l.length?"[]":e?"[\\n"+e+l.join(",\\n"+e)+"\\n"+m+"]":"["+l.join(",")+"]",e=m,j}if(h&&"object"==typeof h)for(k=h.length,g=0;k>g;g+=1)"string"==typeof h[g]&&(i=h[g],\nj=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));return j=0===l.length?"{}":e?"{\\n"+e+l.join(",\\n"+e)+"\\n"+m+"}":"{"+l.join(",")+"}",\ne=m,j}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null;\n},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,e,f,g,h;"function"!=typeof p.stringify&&(d=/[\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\ng={"\\b":"\\\\b","\t":"\\\\t","\\n":"\\\\n","\\f":"\\\\f","\\r":"\\\\r",\'"\':\'\\\\"\',"\\\\":"\\\\\\\\"},p.stringify=function(a,b,d){var g;if(e="",f="","number"==typeof d)for(g=0;d>g;g+=1)f+=" ";else"string"==typeof d&&(f=d);if(h=b,\nb&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON2.stringify");return c("",{"":a})})}();var q=b.JsonParse=function(){var a,b,c,d,e={\'"\':\'"\',"\\\\":"\\\\","/":"/",\nb:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:c}},g=function(d){return d&&d!==b&&f("Expected \'"+d+"\' instead of \'"+b+"\'"),b=c.charAt(a),a+=1,b},h=function(){\nvar a,c="";for("-"===b&&(c="-",g("-"));b>="0"&&"9">=b;)c+=b,g();if("."===b)for(c+=".";g()&&b>="0"&&"9">=b;)c+=b;if("e"===b||"E"===b)for(c+=b,g(),("-"===b||"+"===b)&&(c+=b,g());b>="0"&&"9">=b;)c+=b,g();return a=+c,\nisNaN(a)?void f("Bad number"):a},i=function(){var a,c,d,h="";if(\'"\'===b)for(;g();){if(\'"\'===b)return g(),h;if("\\\\"===b)if(g(),"u"===b){for(d=0,c=0;4>c&&(a=parseInt(g(),16),isFinite(a));c+=1)d=16*d+a;h+=String.fromCharCode(d);\n}else{if("string"!=typeof e[b])break;h+=e[b]}else h+=b}f("Bad string")},j=function(){for(;b&&" ">=b;)g()},k=function(){switch(b){case"t":return g("t"),g("r"),g("u"),g("e"),!0;case"f":return g("f"),g("a"),\ng("l"),g("s"),g("e"),!1;case"n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected \'"+b+"\'")},l=function(){var a=[];if("["===b){if(g("["),j(),"]"===b)return g("]"),a;for(;b;){if(a.push(d()),j(),"]"===b)return g("]"),\na;g(","),j()}}f("Bad array")},m=function(){var a,c={};if("{"===b){if(g("{"),j(),"}"===b)return g("}"),c;for(;b;){if(a=i(),j(),g(":"),Object.hasOwnProperty.call(c,a)&&f(\'Duplicate key "\'+a+\'"\'),c[a]=d(),\nj(),"}"===b)return g("}"),c;g(","),j()}}f("Bad object")};return d=function(){switch(j(),b){case"{":return m();case"[":return l();case\'"\':return i();case"-":return h();default:return b>="0"&&"9">=b?h():k();\n}},function(e,g){var h;return c=e,a=0,b=" ",h=d(),j(),b&&f("Syntax error"),"function"==typeof g?function i(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=i(e,c),\nvoid 0!==d?e[c]=d:delete e[c]);return g.call(a,b,e)}({"":h},""):h}}(),r=b.CwsProtocol=function(){this.generateEvent=function(a,b,c,d){return d.seq=a,d.st=b,d.t=c,d},this.generateSessionEndEvent=function(a,b){\nvar c=r.EVENT_TYPE_SESSION_END,d={};return this.generateEvent(a,b,c,d)}};r.version="2.4",r.gatewayPath="/0/wsg",r.DEFAULT_CLIENT_ID="0",r.DEFAULT_MAX_HEARTBEAT_INFOS=0,r.DEFAULT_PLAYHEAD_TIME=-1,r.DEFAULT_BUFFER_LENGTH=-1,\nr.DEFAULT_SIGNAL_STRENGTH=1e3,r.SDK_METADATA_SCHEMA="sdk.js.1",r.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent",r.EVENT_TYPE_ERROR="CwsErrorEvent",r.EVENT_TYPE_SESSION_END="CwsSessionEndEvent",r.EVENT_TYPE_CUSTOM="CwsCustomEvent",\nr.EVENT_TYPE_SEEK="CwsSeekEvent",r.EVENT_TYPE_DATA_SAMPLE="CwsDataSamplesEvent",r.RESPONSE_STATUS_NO_ERRORS="ok",r.RESPONSE_KEY_STATUS="err",r.RESPONSE_KEY_CLIENT_ID="clid",r.RESPONSE_KEY_CONFIG="cfg",\nr.RESPONSE_KEY_EVENTS="evs",r.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos",r.RESPONSE_CONFIG_KEY_SEND_LOGS="slg",r.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi",r.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw",\nr.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb",r.REQUEST_KEY_MESSAGE_TYPE="t",r.REQUEST_KEY_SESSION_TIME="st",r.REQUEST_KEY_SESSION_START_TIME="sst",r.REQUEST_KEY_IS_LIVE="lv",r.REQUEST_KEY_SEQUENCE_NUMBER="seq",\nr.REQUEST_KEY_CUSTOMER_KEY="cid",r.REQUEST_KEY_CLIENT_ID="clid",r.REQUEST_KEY_CLIENT_VERSION="clv",r.REQUEST_KEY_PROTOCOL_VERSION="pver",r.REQUEST_KEY_INSTANCE_ID="iid",r.REQUEST_KEY_SESSION_ID="sid",r.REQUEST_KEY_VIEWER_ID="vid",\nr.REQUEST_KEY_ASSET_NAME="an",r.REQUEST_KEY_PLAYER_NAME="pn",r.REQUEST_KEY_TAGS="tags",r.REQUEST_KEY_SESSION_FLAGS="sf",r.REQUEST_KEY_EVENTS="evs",r.REQUEST_KEY_LOGS="lg",r.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos",\nr.REQUEST_KEY_IS_SDK_CLIENT="sdk",r.REQUEST_KEY_PAUSE_JOIN="pj",r.REQUEST_KEY_PLAYER_STATE="ps",r.REQUEST_KEY_BITRATE="br",r.REQUEST_KEY_CONTENT_LENGTH="cl",r.REQUEST_KEY_ENCODED_FRAME_RATE="efps",r.REQUEST_KEY_AVERAGE_FRAME_RATE="afps",\nr.REQUEST_KEY_RFPS_TOTAL="rfpstot",r.REQUEST_KEY_RFPS_COUNT="rfpscnt",r.REQUEST_KEY_RESOURCE="rs",r.REQUEST_KEY_PLAYHEAD_TIME="pht",r.REQUEST_KEY_BUFFER_LENGTH="bl",r.REQUEST_KEY_STREAM_URL="url",r.REQUEST_KEY_CAPABILITIES="caps",\nr.REQUEST_KEY_PLATFORM_METADATA="pm",r.REQUEST_KEY_VIDEO_WIDTH="w",r.REQUEST_KEY_VIDEO_HEIGHT="h",r.REQUEST_KEY_CONNECTION_TYPE="ct",r.REQUEST_KEY_LINK_ENCRYPTION="le",r.REQUEST_KEY_SIGNAL_STRENGTH="ss",\nr.REQUEST_KEY_STREAM_METADATA_CHANGE="strmetadata",r.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch",r.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br",r.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv",r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb",\nr.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma",r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm",r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt",r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv",\nr.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw",r.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv",r.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION="cc",r.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME="mn",\nr.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION="mv",r.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="os",r.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="osv",r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_CATEGORY="cat",\nr.REQUEST_KEY_PROTOCOL_CAPP="caps",r.REQUEST_EVENT_KEY_TYPE="t",r.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq",r.REQUEST_EVENT_KEY_SESSION_TIME="st",r.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act",r.REQUEST_EVENT_KEY_SEEK_TO_POS="skto",\nr.REQUEST_ERROR_EVENT_KEY_MESSAGE="err",r.REQUEST_ERROR_EVENT_KEY_FATAL="ft",r.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new",r.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old",r.REQUEST_CUSTOM_EVENT_KEY_NAME="name",\nr.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr",r.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq",r.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err",r.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt",r.REQUEST_KEY_IS_AD_SESSION="ad",\nr.convertPlayerState=function(a){switch(a){case h.PlayerState.STOPPED:return r.eStopped;case h.PlayerState.PLAYING:return r.ePlaying;case h.PlayerState.BUFFERING:return r.eBuffering;case h.PlayerState.PAUSED:\nreturn r.ePaused;case h.PlayerState.NOT_MONITORED:return r.eNotMonitored;default:return r.eUnknown}},r.eStopped=1,r.ePlaying=3,r.eBuffering=6,r.ePaused=12,r.eNotMonitored=98,r.eUnknown=100,r.SessionFlags={\nGLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4},r.Capabilities={INSIGHTS:0};var s=(b.JSONInterface=function(){this.encode=function(a){},this.decode=function(a){}},b.LibJSONInterface=function(){this.encode=function(a){\nvar b=null;try{b=p.stringify(a)}catch(c){}return b},this.decode=function(a){var b=null;try{b=q(a)}catch(c){}return C.isObject(b)||(b=null),b}}),t=b.CwsHeartbeat=function(){function a(){}this._data={},a.apply(this,arguments),\nthis.get=function(){return this._data},this.setField=function(a,b){this._data[a]=b},this.setInnerField=function(a,b,c){this._data[a]||(this._data[a]={}),this._data[a][b]=c},this.setMessageType=function(a){\nthis.setField(r.REQUEST_KEY_MESSAGE_TYPE,a)},this.setSessionTime=function(a){this.setField(r.REQUEST_KEY_SESSION_TIME,a)},this.setSessionStartTime=function(a){this.setField(r.REQUEST_KEY_SESSION_START_TIME,a);\n},this.setIsLive=function(a){this.setField(r.REQUEST_KEY_IS_LIVE,a)},this.setSequenceNumber=function(a){this.setField(r.REQUEST_KEY_SEQUENCE_NUMBER,a)},this.setCustomerKey=function(a){this.setField(r.REQUEST_KEY_CUSTOMER_KEY,a);\n},this.setClientId=function(a){this.setField(r.REQUEST_KEY_CLIENT_ID,a)},this.setClientVersion=function(a){this.setField(r.REQUEST_KEY_CLIENT_VERSION,a)},this.setProtocolVersion=function(a){this.setField(r.REQUEST_KEY_PROTOCOL_VERSION,a);\n},this.setCapfield=function(a){this.setField(r.REQUEST_KEY_PROTOCOL_CAPP,a)},this.setSessionId=function(a){this.setField(r.REQUEST_KEY_SESSION_ID,a)},this.setInstanceId=function(a){this.setField(r.REQUEST_KEY_INSTANCE_ID,a);\n},this.setViewerId=function(a){this.setField(r.REQUEST_KEY_VIEWER_ID,a)},this.setAssetName=function(a){this.setField(r.REQUEST_KEY_ASSET_NAME,a)},this.setPlayerName=function(a){this.setField(r.REQUEST_KEY_PLAYER_NAME,a);\n},this.setTags=function(a){this.setField(r.REQUEST_KEY_TAGS,a)},this.setSessionFlags=function(a){this.setField(r.REQUEST_KEY_SESSION_FLAGS,a)},this.setCapabilities=function(a){this.setField(r.REQUEST_KEY_CAPABILITIES,a);\n},this.setEvents=function(a){this.setField(r.REQUEST_KEY_EVENTS,a)},this.setIsSdkClient=function(a){this.setField(r.REQUEST_KEY_IS_SDK_CLIENT,a)},this.setLogs=function(a){this.setField(r.REQUEST_KEY_LOGS,a);\n},this.setHeartbeatInfos=function(a){this.setField(r.REQUEST_KEY_HEARTBEAT_INFOS,a)},this.setPlayerState=function(a){this.setField(r.REQUEST_KEY_PLAYER_STATE,a)},this.setPauseJoin=function(a){this.setField(r.REQUEST_KEY_PAUSE_JOIN,a);\n},this.setContentLength=function(a){this.setField(r.REQUEST_KEY_CONTENT_LENGTH,a)},this.setBitrate=function(a){this.setField(r.REQUEST_KEY_BITRATE,a)},this.setResource=function(a){this.setField(r.REQUEST_KEY_RESOURCE,a);\n},this.setEncodedFrameRate=function(a){this.setField(r.REQUEST_KEY_ENCODED_FRAME_RATE,a)},this.setAverageFrameRate=function(a){this.setField(r.REQUEST_KEY_AVERAGE_FRAME_RATE,a)},this.setRfpsObservationCount=function(a){\nthis.setField(r.REQUEST_KEY_RFPS_COUNT,a)},this.setRfpsTotal=function(a){this.setField(r.REQUEST_KEY_RFPS_TOTAL,a)},this.setPlatformMetadataSchema=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,a);\n},this.setBrowserName=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,a)},this.setBrowserVersion=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,a);\n},this.setDeviceBrand=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,a)},this.setDeviceManufacturer=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,a);\n},this.setDeviceModel=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,a)},this.setDeviceType=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,a);\n},this.setDeviceVersion=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,a)},this.setFrameworkName=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,a),\nthis.setField(r.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,a)},this.setFrameworkVersion=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,a),\nthis.setField(r.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,a)},this.setOperatingSystemName=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,a.toUpperCase());\n},this.setOperatingSystemVersion=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,a)},this.setDeviceCategory=function(a){this.setInnerField(r.REQUEST_KEY_PLATFORM_METADATA,r.REQUEST_PLATFORM_METADATA_KEY_DEVICE_CATEGORY,a);\n},this.setPlayheadTime=function(a){this.setField(r.REQUEST_KEY_PLAYHEAD_TIME,a)},this.setBufferLength=function(a){this.setField(r.REQUEST_KEY_BUFFER_LENGTH,a)},this.setStreamUrl=function(a){this.setField(r.REQUEST_KEY_STREAM_URL,a);\n},this.setStreamWidth=function(a){this.setField(r.REQUEST_KEY_VIDEO_WIDTH,a)},this.setStreamHeight=function(a){this.setField(r.REQUEST_KEY_VIDEO_HEIGHT,a)},this.setConnectionType=function(a){this.setField(r.REQUEST_KEY_CONNECTION_TYPE,a);\n},this.setLinkEncryption=function(a){this.setField(r.REQUEST_KEY_LINK_ENCRYPTION,a)},this.setIsAdSession=function(){this.setField(r.REQUEST_KEY_IS_AD_SESSION,!0)},this.setSignalStrength=function(a){this.setField(r.REQUEST_KEY_SIGNAL_STRENGTH,a);\n},this.setModuleName=function(a){this.setInnerField(r.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,r.REQUEST_PLATFORM_METADATA_KEY_MODULE_NAME,a)},this.setModuleVersion=function(a){this.setInnerField(r.REQUEST_PLATFORM_METADATA_KEY_CLIENT_CONFIGURATION,r.REQUEST_PLATFORM_METADATA_KEY_MODULE_VERSION,a);\n}},u=b.CwsSession=function(a,b,d,e,f,g,i,j,k,l,m){function n(a,b,c,d,e,f,g,h,i,j,k){this._eventQueue=a,this._client=b,this._clientSettings=c,this._logger=d,this._logger.setModuleName("CwsSession"),this._exceptionCatcher=e,\nthis._timer=f,this._gatewayControl=g,this._cwsProtocol=h,this._time=i,this._logBuffer=j,this._clientConfig=k}var o=this;o._heartbeatTimerCancel=null,o._startTimeMs=0,o._heartbeatSequenceNumber=0,o._sessionFlags=r.SessionFlags.GLOBAL,\no._capabilities=r.Capabilities.INSIGHTS,o._heartbeatInfos=[],o._lastRequestSentMs=-1,o._bitrateKbps=-2,o._resource=null,o._playerState=h.PlayerState.NOT_MONITORED,o._encodedFrameRate=-1,o._contentLengthSec=-1,\no._streamUrl=null,o._width=-1,o._height=-1,o._playerStateManager=null,o._assetName=null,o._viewerId=null,o._playerName=null,o._isLive=null,o._tags={},o._browserName=null,o._browserVersion=null,o._deviceBrand=null,\no._deviceManufacturer=null,o._deviceModel=null,o._deviceType=null,o._deviceVersion=null,o._frameworkName=null,o._frameworkVersion=null,o._operatingSystemName=null,o._operatingSystemVersion=null,o._deviceCategory=null,\no._moduleName=null,o._moduleVersion=null,o._connectionType=null,o._linkEncryption=null,o._pauseJoin=!1,o._hasJoined=!1,o._cleanedUp=!1,o._willEndSoon=!1,o._rfpsTimerCancel=null,o._rfpsTimerInterval=1e3,\no._playingFpsObservationCount=0,o._playingFpsTotal=0,n.apply(this,arguments),this.cleanup=function(){this._clientConfig=null,this._logBuffer=null,this._systemSettings=null,this._time=null,this._cwsProtocol=null,\nthis._gatewayControl=null,this._timer=null,this._exceptionCatcher=null,this._logger=null,this._clientSettings=null,this._client=null,this._eventQueue.flush(),this._eventQueue=null,this._cleanedUp=!0},this.start=function(a){\nthis._session=a,this._global=this._session._global,this._logger.setSessionId(this._session._id),this._startTimeMs=this._time.current(),(this.isVideoSession()||this.isAdSession())&&(this._sessionFlags+=u.DEFAULT_VIDEO_SESSION_FLAGS);\n},this.willEndSoon=function(){this._willEndSoon=!0},this.initialize=function(){this._logger.debug("initialize()")},this.end=function(){(this.isVideoSession()||this.isAdSession())&&(this._logger.debug("end(): schedule the last hb before session cleanup"+o.sessionTypeTag()),\nthis.enqueueSessionEndEvent()),this.cancelHeartbeatTimer(),this.sendHeartbeat()},this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())},this.setBrowserName=function(a){\no._logger.debug("setBrowserName(): "+a);var b=o._browserName;b!==a&&null!=a&&(o._logger.debug("Change browserName from "+b+" to "+a),o._browserName=a)},this.setBrowserVersion=function(a){o._logger.debug("setBrowserVersion(): "+a);\nvar b=o._browserVersion;b!==a&&null!=a&&(o._logger.debug("Change browserVersion from "+b+" to "+a),o._browserVersion=a)},this.setDeviceBrand=function(a){o._logger.debug("setDeviceBrand(): "+a);var b=o._deviceBrand;\nb!==a&&null!=a&&(o._logger.debug("Change deviceBrand from "+b+" to "+a),o._deviceBrand=a)},this.setDeviceManufacturer=function(a){o._logger.debug("setDeviceManufacturer(): "+a);var b=o._deviceManufacturer;\nb!==a&&null!=a&&(o._logger.debug("Change deviceManufacturer from "+b+" to "+a),o._deviceManufacturer=a)},this.setDeviceModel=function(a){o._logger.debug("setDeviceModel(): "+a);var b=o._deviceModel;b!==a&&null!=a&&(o._logger.debug("Change deviceModel from "+b+" to "+a),\no._deviceModel=a)},this.setDeviceType=function(a){o._logger.debug("setDeviceBrand(): "+a);var b=o._deviceType;b!==a&&null!=a&&(o._logger.debug("Change deviceType from "+b+" to "+a),o._deviceType=a)},this.setDeviceVersion=function(a){\no._logger.debug("setDeviceVersion(): "+a);var b=o._deviceVersion;b!==a&&null!=a&&(o._logger.debug("Change deviceVersion from "+b+" to "+a),o._deviceVersion=a)},this.setOperatingSystemName=function(a){o._logger.debug("setOperatingSystemName(): "+a);\nvar b=o._operatingSystemName;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemName from "+b+" to "+a),o._operatingSystemName=a)},this.setOperatingSystemVersion=function(a){o._logger.debug("setOperatingSystemVersion(): "+a);\nvar b=o._operatingSystemVersion;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemVersion from "+b+" to "+a),o._operatingSystemVersion=a)},this.setDeviceCategory=function(a){o._logger.debug("setDeviceCategory(): "+a);\nvar b=o._deviceCategory;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemVersion from "+b+" to "+a),o._deviceCategory=a)},this.getFrameworkName=function(){return o._frameworkName},this.setFrameworkName=function(a){\no._logger.debug("setFrameworkName(): "+a);var b=o._frameworkName;b!==a&&null!=a&&(o._logger.debug("Change frameworkName from "+b+" to "+a),o._frameworkName=a)},this.getFrameworkVersion=function(){return o._frameworkVersion;\n},this.setFrameworkVersion=function(a){o._logger.debug("setFrameworkVersion(): "+a);var b=o._frameworkVersion;b!==a&&null!=a&&(o._logger.debug("Change frameworkVersion from "+b+" to "+a),o._frameworkVersion=a);\n},this.setStreamUrl=function(a){o._logger.debug("setStreamUrl(): "+a);var b=o._streamUrl;b!==a&&null!=a&&(o._logger.debug("Change stream url from "+b+" to "+a),o._streamUrl=a)},this.setBitrateKbps=function(a){\no._logger.debug("setBitrateKbps(): "+a);var b=o._bitrateKbps;b!==a&&a>0&&(o._logger.info("Change bitrate from "+b+" to "+a),o.enqueueBitrateChangeEvent(b,a),o._bitrateKbps=a)},this.setResource=function(a){\no._logger.debug("setResource(): "+a);var b=o._resource;b!==a&&null!=a&&(o._logger.info("Change resource from "+b+" to "+a),o._resource=a)},this.setAssetName=function(a){o._logger.debug("setAssetName(): "+a),\no._assetName!==a&&null!=a&&(o._logger.info("Change assetName from "+o._assetName+" to "+a),o._assetName=a)},this.setIsLive=function(a){o._logger.debug("setIsLive(): "+a);var b=o._isLive;b!==a&&null!=a&&(o._logger.info("Change isLive from "+b+" to "+a),\no._isLive=a)},this.setViewerId=function(a){o._logger.debug("setViewerId(): "+a);var b=o._viewerId;b!==a&&null!=a&&(o._logger.info("Change viewerId from "+b+" to "+a),o._viewerId=a)},this.setPlayerName=function(a){\no._logger.debug("setPlayerName(): "+a);var b=o._playerName;b!==a&&null!=a&&(o._logger.info("Change playerName from "+b+" to "+a),o._playerName=a)},this.setTags=function(a){o._logger.debug("setTags()");var b=o._tags;\nC.ObjectShallowEquals(b,a)||null==a||(o._logger.info("Change tags from "+C.ObjectToString(b)+" to "+C.ObjectToString(a)),o._tags=a)},this.setEncodedFrameRate=function(a){o._logger.debug("setEncodedFrameRate(): "+a),\no._encodedFrameRate=a},this.setContentLength=function(a){o._logger.debug("setContentLength(): "+a),o._contentLengthSec=a},this.setPlayerState=function(a){if(o._logger.debug("setPlayerState(): "+a),o._hasJoined||a!=h.PlayerState.PLAYING||(o.togglePauseJoin(!1),\no._hasJoined=!0),o._playerState!==a){var b=o._playerState;o._logger.info("setPlayerState(): changing player state from "+b+" to "+a),o.enqueuePlayerStateChangeEvent(b,a),o._playerState=a}},this.setStreamResolutionWidth=function(a){\no._logger.debug("setStreamResolutionWidth(): "+a);var b=o._width;b!==a&&a>0&&(o._logger.debug("Change stream resolution width from "+b+" to "+a),o.enqueueResolutionWidthChangeEvent(b,a),o._width=a)},this.setStreamResolutionHeight=function(a){\no._logger.debug("setStreamResolutionHeight(): "+a);var b=o._height;b!==a&&a>0&&(o._logger.debug("Change stream resolution height from "+b+" to "+a),o.enqueueResolutionHeightChangeEvent(b,a),o._height=a);\n},this.setConnectionType=function(a){o._logger.debug("setConnectionType(): "+a);var b=o._connectionType;b!==a&&null!=a&&(o._logger.debug("Change network connection type from "+b+" to "+a),o.enqueueConnectionTypeChangeEvent(b,a),\no._connectionType=a)},this.setLinkEncryption=function(a){o._logger.debug("setLinkEncryption(): "+a);var b=o._linkEncryption;b!==a&&null!=a&&(o._logger.debug("Change network link encryption from "+b+" to "+a),\no.enqueueLinkEncryptionChangeEvent(b,a),o._linkEncryption=a)},this.togglePauseJoin=function(a){if(o._logger.debug("togglePauseJoin()"),o._pauseJoin===a)return void o._logger.debug("togglePauseJoin(): same value, ignoring");\nvar b=o._pauseJoin,c=!o._pauseJoin;o.enqueuePauseJoinChangeEvent(b,c),o._pauseJoin=!o._pauseJoin},this.sendError=function(a,b){o.enqueueErrorEvent(a,b)},this.enqueueEvent=function(a,b){if(b[r.REQUEST_EVENT_KEY_TYPE]=a,\nb[r.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),b[r.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._playerStateManager){var c=G.Integer(this._playerStateManager.getPHT(),0,null,-1),d=G.Integer(this._playerStateManager.getBufferLength(),0,null,-1);\nc>=0&&(b[r.REQUEST_KEY_PLAYHEAD_TIME]=c),d>0&&(b[r.REQUEST_KEY_BUFFER_LENGTH]=d)}this._eventQueue.enqueue(b)},this.setPlayerStateManager=function(a){o._playerStateManager=a,null!=o._playerStateManager?o.startRfpsTimer():o.cancelRfpsTimer();\n},this.enqueueSessionEndEvent=function(){var a=this.getSessionTime(),b=this.getNextEventNumber(),c=this._cwsProtocol.generateSessionEndEvent(b,a);this._eventQueue.enqueue(c)},this.enqueueErrorEvent=function(a,b){\nvar c={};c[r.REQUEST_ERROR_EVENT_KEY_MESSAGE]=a,c[r.REQUEST_ERROR_EVENT_KEY_FATAL]=b,this.enqueueEvent(r.EVENT_TYPE_ERROR,c)},this.enqueueBitrateChangeEvent=function(a,b){var c={},d={};a>0&&(d[r.REQUEST_KEY_BITRATE]=a),\nc[r.REQUEST_KEY_BITRATE]=b,this.declareStateChange(c,d)},this.enqueueSeekEvent=function(a,b){var c={};c[r.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=a,b>=0&&(c[r.REQUEST_EVENT_KEY_SEEK_TO_POS]=b),this.enqueueEvent(r.EVENT_TYPE_SEEK,c);\n},this.enqueueResolutionWidthChangeEvent=function(a,b){var c={},d={};-1!==a&&(d[r.REQUEST_KEY_VIDEO_WIDTH]=a),c[r.REQUEST_KEY_VIDEO_WIDTH]=b,this.declareStateChange(c,d)},this.enqueueResolutionHeightChangeEvent=function(a,b){\nvar c={},d={};-1!==a&&(d[r.REQUEST_KEY_VIDEO_HEIGHT]=a),c[r.REQUEST_KEY_VIDEO_HEIGHT]=b,this.declareStateChange(c,d)},this.enqueueConnectionTypeChangeEvent=function(a,b){var c={},d={};null!==a&&(d[r.REQUEST_KEY_CONNECTION_TYPE]=a),\nc[r.REQUEST_KEY_CONNECTION_TYPE]=b,this.declareStateChange(c,d)},this.enqueueLinkEncryptionChangeEvent=function(a,b){var c={},d={};null!==a&&(d[r.REQUEST_KEY_LINK_ENCRYPTION]=a),c[r.REQUEST_KEY_LINK_ENCRYPTION]=b,\nthis.declareStateChange(c,d)},this.enqueuePauseJoinChangeEvent=function(a,b){var c={},d={};d[r.REQUEST_KEY_PAUSE_JOIN]=a,c[r.REQUEST_KEY_PAUSE_JOIN]=b,this.declareStateChange(c,d)},this.enqueuePlayerStateChangeEvent=function(a,b){\nvar c={},d={};c[r.REQUEST_KEY_PLAYER_STATE]=r.convertPlayerState(b),d[r.REQUEST_KEY_PLAYER_STATE]=r.convertPlayerState(a),this.declareStateChange(c,d)},this.declareStateChange=function(a,b){var c={};c[r.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=a,\nnull!=b&&C.dictCount(b)>0&&(c[r.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=b),this.enqueueEvent(r.EVENT_TYPE_STATE_CHANGE,c)},this.enqueueCustomEvent=function(a,b){var c={};c[r.REQUEST_CUSTOM_EVENT_KEY_NAME]=a,\nc[r.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=b,this.enqueueEvent(r.EVENT_TYPE_CUSTOM,c)},this.cancelHeartbeatTimer=function(){null!=o._heartbeatTimerCancel&&(o._heartbeatTimerCancel(),o._heartbeatTimerCancel=null);\n},this.resetHeartbeatTimer=function(){o.cancelHeartbeatTimer();var a=1e3*o._clientSettings.heartbeatInterval;o._heartbeatTimerCancel=o._timer.create(o.sendHeartbeat,a,"Session.sendHeartbeat")},this.cancelRfpsTimer=function(){\nnull!=o._rfpsTimerCancel&&(o._rfpsTimerCancel(),o._rfpsTimerCancel=null)},this.startRfpsTimer=function(){o.cancelRfpsTimer(),o._rfpsTimerCancel=o._timer.create(o.countRfps,o._rfpsTimerInterval,"Session.startRfpsTimer");\n},this.createHeartbeatInfo=function(){var a={};a.err="pending",a.seq=o._heartbeatSequenceNumber-1,a.sentAt=o.getSessionTime(),a.rtt=-1,o._heartbeatInfos.push(a)},this.updateHeartbeatInfoOnFailure=function(a,b){\nfor(var c=0;c<o._heartbeatInfos.length;c++){var d=o._heartbeatInfos[c],e=d.seq;e===a&&(d.rtt=o.getSessionTime()-d.sentAt,d.err=b)}},this.updateHeartbeatInfoOnSuccess=function(a){for(var b=0;b<o._heartbeatInfos.length;b++){\nvar c=o._heartbeatInfos[b],d=c.seq;d===a&&(c.rtt=o.getSessionTime()-c.sentAt,c.err="ok")}},this.removeOutdatedHeartbeatInfos=function(){for(var a,b,c=o._clientConfig.get(y.CONFIG_KEY_MAX_HEARTBEAT_INFOS),d=[],e=0;e<o._heartbeatInfos.length;e++)b=o._heartbeatInfos[e],\na=b.seq,a<o._heartbeatSequenceNumber-c&&d.push(e);for(var f=[],g=0;g<o._heartbeatInfos.length;g++)b=o._heartbeatInfos[g],a=b.seq,d.indexOf(g)<0&&f.push(o._heartbeatInfos[g]);o._heartbeatInfos=f},this.compileHeartbeatInfos=function(){\no.removeOutdatedHeartbeatInfos();for(var a=[],b=0;b<o._heartbeatInfos.length;b++){var c=o._heartbeatInfos[b],d={};d[r.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=c.seq,d[r.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=c.rtt,\nd[r.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=c.err,a.push(d)}return a},this.makeHeartbeat=function(){var a=o._eventQueue.flush();if(o.isGlobalSession()&&0===a.length)return null;var b=new t;if(b.setMessageType(r.MESSAGE_TYPE_SESSION_HEARTBEAT),\nb.setCustomerKey(o._clientSettings.customerKey),b.setClientId(o._clientConfig.get(y.CONFIG_KEY_CLIENT_ID)),b.setSessionId(o._session._id),b.setSequenceNumber(o._heartbeatSequenceNumber),b.setProtocolVersion(r.version),\nb.setClientVersion(c.version),b.setInstanceId(o._client.getId()),b.setCapfield(0),null!=o._connectionType&&b.setConnectionType(o._connectionType),null!=o._linkEncryption&&b.setLinkEncryption(o._linkEncryption),\nb.setPlatformMetadataSchema(r.SDK_METADATA_SCHEMA),null!=o._browserName&&b.setBrowserName(o._browserName),null!=o._browserVersion&&b.setBrowserVersion(o._browserVersion),null!=o._deviceBrand&&b.setDeviceBrand(o._deviceBrand),\nnull!=o._deviceManufacturer&&b.setDeviceManufacturer(o._deviceManufacturer),null!=o._deviceModel&&b.setDeviceModel(o._deviceModel),null!=o._deviceType&&b.setDeviceType(o._deviceType),null!=o._deviceVersion&&b.setDeviceVersion(o._deviceVersion),\nnull!=o._frameworkName&&b.setFrameworkName(o._frameworkName),null!=o._frameworkVersion&&b.setFrameworkVersion(o._frameworkVersion),null!=o._operatingSystemName&&b.setOperatingSystemName(o._operatingSystemName),\nnull!=o._operatingSystemVersion&&b.setOperatingSystemVersion(o._operatingSystemVersion),null!=o._deviceCategory&&b.setDeviceCategory(o._deviceCategory),null!=o._playerStateManager&&(o._moduleName=o._playerStateManager.getModuleName(),\nnull!=o._moduleName&&b.setModuleName(o._moduleName)),null!=o._playerStateManager&&(o._moduleVersion=o._playerStateManager.getModuleVersion(),null!=o._moduleVersion&&b.setModuleVersion(o._moduleVersion)),\nnull!=o._viewerId&&b.setViewerId(o._viewerId),C.dictCount(o._tags)>0&&b.setTags(o._tags),o.isVideoSession()||o.isAdSession()){o.isAdSession()&&b.setIsAdSession(),null!=o._assetName&&b.setAssetName(o._assetName),\nb.setSessionFlags(o._sessionFlags);var d=r.convertPlayerState(o._playerState);b.setPlayerState(d),b.setPauseJoin(o._pauseJoin),null!=o._playerName&&b.setPlayerName(o._playerName),null!=o._isLive&&b.setIsLive(o._isLive),\no._contentLengthSec>0&&b.setContentLength(o._contentLengthSec),o._bitrateKbps>0&&b.setBitrate(o._bitrateKbps),null!==o._resource&&b.setResource(o._resource),o._encodedFrameRate>0&&b.setEncodedFrameRate(o._encodedFrameRate);\nvar e,f,g;null!=o._playerStateManager&&(e=G.Integer(o._playerStateManager.getPHT(),0,null,-1),f=G.Integer(o._playerStateManager.getBufferLength(),0,null,-1),g=o._playerStateManager.getSignalStrength()),\ne>=0&&b.setPlayheadTime(e),f>0&&b.setBufferLength(f);var h=o.updateAverageFrameRate();h>0&&b.setAverageFrameRate(h),o._playingFpsTotal>0&&b.setRfpsTotal(G.Integer(o._playingFpsTotal,0,null,-1)),o._playingFpsObservationCount>0&&b.setRfpsObservationCount(G.Integer(o._playingFpsObservationCount,0,null,-1)),\n0>=g&&b.setSignalStrength(g),null!=o._streamUrl&&b.setStreamUrl(o._streamUrl),o._width>0&&b.setStreamWidth(o._width),o._height>0&&b.setStreamHeight(o._height)}else b.setSessionFlags(r.SessionFlags.GLOBAL);\nif(a.length>0&&b.setEvents(a),b.setCapabilities(o._capabilities),b.setIsSdkClient(!0),o._clientConfig.get(y.CONFIG_KEY_SEND_LOGS)&&b.setLogs(o._logBuffer.flush()),o._clientConfig.get(y.CONFIG_KEY_MAX_HEARTBEAT_INFOS)>0){\nvar i=o.compileHeartbeatInfos();i.length>0&&b.setHeartbeatInfos(i)}return b.setSessionStartTime(o._startTimeMs),b.setSessionTime(o.getSessionTime()),o._heartbeatSequenceNumber++,b.get()},this.sendHeartbeat=function(){\nif(!o._cleanedUp){var a=o.makeHeartbeat();null!=a&&o.postHeartbeat(a)}},this.countRfps=function(){if(o._playerState===h.PlayerState.PLAYING){var a=o._playerStateManager.getRenderedFrameRate();a>=0&&(o._playingFpsTotal+=a,\no._playingFpsObservationCount++)}},this.updateAverageFrameRate=function(){if(o._playerState===h.PlayerState.PLAYING){var a=o._playerStateManager.getRenderedFrameRate();if(a>=0){o._playingFpsTotal+=a,o._playingFpsObservationCount++;\nvar b=C.Int32.Cast(1*o._playingFpsTotal/o._playingFpsObservationCount);return b}return-1}return-1},this.postHeartbeat=function(a){o.createHeartbeatInfo();var b=o._heartbeatSequenceNumber-1;o._logger.info("postHeartbeat(): Send HB["+b+"]"+o.sessionTypeTag());\nvar c=function(a,c){o.onHeartbeatResponse(a,c,b)};o._gatewayControl.send(a,c)},this.onHeartbeatResponse=function(a,b,c){o._cleanedUp||o._exceptionCatcher.runProtected("onHeartbeatResponse",function(){if(a){\nvar d=b;if(null!=d){o._logger.debug("onHeartbeatResponse(): received valid response for HB["+c+"]"),o.updateHeartbeatInfoOnSuccess(c);var e=d[r.RESPONSE_KEY_CLIENT_ID];null!=e&&e!=o._clientConfig.get(y.CONFIG_KEY_CLIENT_ID)&&(o._logger.debug("onHeartbeatResponse(): setting the client id to "+e+" (from gateway)"),\no._clientConfig.set(y.CONFIG_KEY_CLIENT_ID,e),o._clientConfig.save());var f=d[r.RESPONSE_KEY_STATUS];null!=f&&f!=r.RESPONSE_STATUS_NO_ERRORS&&o._logger.error("onHeartbeatResponse(): error from gateway: "+f);\nvar g=d[r.RESPONSE_KEY_CONFIG];if("object"==typeof g){var h=g[r.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS];null!=h&&o._clientConfig.get(y.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==h&&(o._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+h+" (from gateway)"),\no._clientConfig.set(y.CONFIG_KEY_MAX_HEARTBEAT_INFOS,h));var i=g[r.RESPONSE_CONFIG_KEY_SEND_LOGS],j=null!=i?C.AsBoolean(i):!1;j!==o._clientConfig.get(y.CONFIG_KEY_SEND_LOGS)&&(o._logger.debug("onHeartbeatResponse(): turning "+(j?"on":"off")+" sending of logs"),\no._clientConfig.set(y.CONFIG_KEY_SEND_LOGS,j));var k=g[r.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL];if(null!=k){var l=C.Int32.Cast(k),m=l;m!=o._clientSettings.heartbeatInterval&&(o._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+m),\no._clientSettings.heartbeatInterval=m,null!=o._heartbeatTimerCancel&&o.resetHeartbeatTimer())}var n=g[r.RESPONSE_CONFIG_KEY_GATEWAY_URL];null!=n&&n!=o._clientSettings.gatewayUrl&&(o._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),\no._clientSettings.gatewayUrl=n)}}else o._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null.")}else{var p=b;C.isValidString(p)?C.stringStartsWith(p,"HTTP timeout")?o._logger.warning("onHeartbeatResponse(): "+p):o._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+p):(p=v.DEFAULT_HEARTBEAT_ERROR_MESSAGE,\no._logger.error("onHeartbeatResponse(): "+p)),o.updateHeartbeatInfoOnFailure(c,p)}})},this.getSessionTime=function(){var a=C.Int32.Cast(o._time.current()-o._startTimeMs);return a},this.getNextEventNumber=function(){\nreturn this._eventQueue.getNumber()},this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""},this.isGlobalSession=function(){return this._global==u.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){\nreturn this._global==u.SESSION_TYPE.VIDEO},this.isAdSession=function(){return this._global==u.SESSION_TYPE.AD}};u.DEFAULT_VIDEO_SESSION_FLAGS=r.SessionFlags.VIDEO+r.SessionFlags.QUALITY_METRICS+r.SessionFlags.BITRATE_METRICS,\nu.SESSION_TYPE={VIDEO:"Video",GLOBAL:"Global",AD:"Ad"};var v=(b.IMonitor=function(){this.onPlayerStateChange=function(a){},this.onBitrateChange=function(a){},this.onSeekEvent=function(a,b){},this.onEncodedFrameRateChange=function(a){},\nthis.onRenderedFrameRateChange=function(a){},this.onContentLengthChange=function(a){},this.onPlayheadTimeChange=function(a){},this.onStreamUrlChange=function(a){},this.onBufferLengthChange=function(a){},\nthis.onPlayerTypeChange=function(a){},this.onPlayerVersionChange=function(a){},this.onStreamResolutionWidthChange=function(a){},this.onStreamResolutionHeightChange=function(a){},this.onConnectionTypeChange=function(a){},\nthis.onLinkEncryptionChange=function(a){},this.onSignalStrengthChange=function(a){},this.onError=function(a,b){},this.onRelease=function(){}},b.Session=function(){function b(a,b,c,d,e,f,g,h){this._id=a,\nthis._global=b,this._contentMetadata=c,this._clientConfig=d,this._systemMetadata=e,this._cwsSession=f,this._exceptionCatcher=g,this._logger=h,this._logger.setModuleName("Session"),this._logger.setSessionId(C.ToString(this._id));\n}var c=this;c._contentMetadata=null,c._playerStateManager=null,c._id=0,c._global=u.SESSION_TYPE.VIDEO,c._cleaningUp=!1,c._cleanedUp=!1,c._adPlaying=!1,c._adStream=null,c._adPlayer=null,c._adPosition=null,\nc._ignorePlayerState=!1,c._pooledPlayerState=h.PlayerState.NOT_MONITORED,c._ignoreBitrateAndResource=!1,c._ignorePlayheadTimeandBufferLength=!1,c._ignoreEncodedFrameRateAndDuration=!1,c._ignoreError=!1,\nb.apply(c,arguments),this.start=function(){if(c.isVideoSession()||c.isAdSession()?c._logger.info("start(): assetName="+c._contentMetadata.assetName):c._logger.info("start()"+c.sessionTypeTag()),c._cwsSession.start(this),\nc._clientConfig.isReady())c.initiateSession();else{var a=function(){c.initiateSession()};c._clientConfig.register(a)}},this.cleanup=function(){if(c._logger.info("cleanup()"+c.sessionTypeTag()),c._cleaningUp=!0,\nc._cwsSession.willEndSoon(),c._clientConfig.isReady())c.endCwsSessionAndCleanupAll();else{var a=function(){c.endCwsSessionAndCleanupAll()};c._clientConfig.register(a)}},this.cleanupAll=function(){c._logger.debug("cleanupAll()"+c.sessionTypeTag()),\n(c.isVideoSession()||c.isAdSession())&&null!=c._playerStateManager&&c.detachPlayer(),c._contentMetadata=null,c._logger.setSessionId(null),c._logger=null,c._exceptionCatcher=null,c._client=null,c._clientConfig=null,\nc._systemMetadata=null,c._cwsSession.cleanup(),c._cwsSession=null,c._cleanedUp=!0},this.endCwsSessionAndCleanupAll=function(){c._cwsSession.end(),c.cleanupAll()},this.initiateSession=function(){c._cwsSession.initialize(),\nc.setStatesFromSystemMetadata(),(c.isVideoSession()||c.isAdSession())&&(c.setStatesFromContentMetadata(),c.enqueueEventForContentMetadata()),c._cwsSession.startSendingHeartbeats()},this.enqueueEventForContentMetadata=function(){\nvar b={};if(null!=c._contentMetadata.assetName?b[r.REQUEST_KEY_ASSET_NAME]=c._contentMetadata.assetName:c._logger.warning("enqueueEventForContentMetadata(): assetName was not set."),null!=c._contentMetadata.applicationName?("undefined"==typeof b[r.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(b[r.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),\nb[r.REQUEST_KEY_STREAM_METADATA_CHANGE][r.REQUEST_KEY_PLAYER_NAME]=c._contentMetadata.applicationName):c._logger.warning("enqueueEventForContentMetadata(): applicationName was not set."),null!=c._contentMetadata.streamUrl?b[r.REQUEST_KEY_STREAM_URL]=c._contentMetadata.streamUrl:c._logger.warning("enqueueEventForContentMetadata(): streamUrl was not set."),\nnull!=c._contentMetadata.viewerId?("undefined"==typeof b[r.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(b[r.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),b[r.REQUEST_KEY_STREAM_METADATA_CHANGE][r.REQUEST_KEY_VIEWER_ID]=c._contentMetadata.viewerId):c._logger.warning("enqueueEventForContentMetadata(): viewerId was not set."),\nnull!=c._contentMetadata.defaultResource?b[r.REQUEST_KEY_RESOURCE]=c._contentMetadata.defaultResource:c._logger.warning("enqueueEventForContentMetadata(): defaultResource was not set."),c._contentMetadata.duration>-1?b[r.REQUEST_KEY_CONTENT_LENGTH]=c._contentMetadata.duration:c._logger.warning("enqueueEventForContentMetadata(): duration was not set."),\nc._contentMetadata.encodedFrameRate>-1?b[r.REQUEST_KEY_ENCODED_FRAME_RATE]=c._contentMetadata.encodedFrameRate:c._logger.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),c._contentMetadata.streamType!=e.StreamType.UNKNOWN?c._contentMetadata.streamType==a.ContentMetadata.StreamType.LIVE?b[r.REQUEST_KEY_IS_LIVE]=!0:b[r.REQUEST_KEY_IS_LIVE]=!1:c._logger.warning("enqueueEventForContentMetadata(): streamType was not set."),\nC.dictCount(c._contentMetadata.custom)>0){b[r.REQUEST_KEY_TAGS]={};for(var d in c._contentMetadata.custom)b[r.REQUEST_KEY_TAGS][d]=c._contentMetadata.custom[d]}else c._logger.warning("enqueueEventForContentMetadata(): custom tags were not set.");\nC.dictCount(b)>0&&c._cwsSession.declareStateChange(b,null)},this.setStatesFromSystemMetadata=function(){c._logger.debug("setStatesFromSystemMetadata()");var a=c._systemMetadata.get(),b=a[K.BROWSER_NAME];\nnull!=b&&c._cwsSession.setBrowserName(b);var d=a[K.BROWSER_VERSION];null!=d&&c._cwsSession.setBrowserVersion(d);var e=a[K.DEVICE_BRAND];null!=e&&c._cwsSession.setDeviceBrand(e);var f=a[K.DEVICE_MANUFACTURER];\nnull!=f&&c._cwsSession.setDeviceManufacturer(f);var g=a[K.DEVICE_MODEL];null!=g&&c._cwsSession.setDeviceModel(g);var h=a[K.DEVICE_TYPE];null!=h&&c._cwsSession.setDeviceType(h);var i=a[K.DEVICE_VERSION];\nnull!=i&&c._cwsSession.setDeviceVersion(i);var j=a[K.FRAMEWORK_NAME];null!=j&&c._cwsSession.setFrameworkName(j);var k=a[K.FRAMEWORK_VERSION];null!=k&&c._cwsSession.setFrameworkVersion(k);var l=a[K.OPERATING_SYSTEM_NAME];\nnull!=l&&c._cwsSession.setOperatingSystemName(l);var m=a[K.OPERATING_SYSTEM_VERSION];null!=m&&c._cwsSession.setOperatingSystemVersion(m);var n=a[K.DEVICE_CATEGORY];null!=n&&c._cwsSession.setDeviceCategory(n);\n},this.setStatesFromContentMetadata=function(){if(c._logger.debug("setStatesFromContentMetadata()"),null!=c._contentMetadata.defaultResource&&c._cwsSession.setResource(c._contentMetadata.defaultResource),\nnull!=c._contentMetadata.streamUrl&&c._cwsSession.setStreamUrl(c._contentMetadata.streamUrl),c._contentMetadata.duration>0&&c._cwsSession.setContentLength(c._contentMetadata.duration),c._contentMetadata.encodedFrameRate>0&&c._cwsSession.setEncodedFrameRate(c._contentMetadata.encodedFrameRate),\nc._contentMetadata.streamType!==e.StreamType.UNKNOWN){var a=c._contentMetadata.streamType===e.StreamType.LIVE;c._cwsSession.setIsLive(a)}null!=c._contentMetadata.assetName&&c._cwsSession.setAssetName(c._contentMetadata.assetName),\nnull!=c._contentMetadata.viewerId&&c._cwsSession.setViewerId(c._contentMetadata.viewerId),null!=c._contentMetadata.applicationName&&c._cwsSession.setPlayerName(c._contentMetadata.applicationName),C.dictCount(c._contentMetadata.custom)>0&&c._cwsSession.setTags(c._contentMetadata.custom);\n},this.onPlayerStateChange=function(a){return c._logger.debug("onPlayerStateChange(): "+a),c._cwsSession._playerState!=a?(c._cwsSession._playerState==h.PlayerState.NOT_MONITORED&&a!=h.PlayerState.NOT_MONITORED&&(c._pooledPlayerState=a),\nc._ignorePlayerState?void c._logger.debug("onPlayerStateChange(): "+a+" (pooled, "+(c._adPlaying?"ad playing":"preloading")+")"):void c._cwsSession.setPlayerState(a)):void 0},this.onBitrateChange=function(a){\nreturn c._logger.debug("onBitrateChange(): "+a),c._ignoreBitrateAndResource?void c._logger.info("onBitrateChange(): ignored"):void c._cwsSession.setBitrateKbps(a)},this.onSeekEvent=function(a,b){null==b||C.isInteger(b)||(c._logger.error("onSeekEvent(): Ignored non-integer seekToPosition data: "+b),\nb=-1),c._cwsSession.enqueueSeekEvent(a,b)},this.onEncodedFrameRateChange=function(a){c._logger.debug("onEncodedFrameRateChange(): "+a),c._contentMetadata.encodedFrameRate>0||(a>0?c._ignoreEncodedFrameRateAndDuration?c._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+a+" (ads)"):(c._cwsSession.setEncodedFrameRate(a),\nc._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+a)):c._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+a))},this.onContentLengthChange=function(a){\nc._logger.debug("onContentLengthChange(): "+a),c._contentMetadata.duration>0||(a>0?c._ignoreEncodedFrameRateAndDuration?c._logger.info("setContentLength(): Ignored content length data: "+a+" (ads)"):(c._cwsSession.setContentLength(a),\nc._logger.info("setContentLength(): Received content length data: "+a)):c._logger.warning("setContentLength(): Ignored invalid content length data: "+a))},this.onStreamUrlChange=function(a){c._logger.debug("onStreamUrlChange(): "+a),\nnull==c._contentMetadata.streamUrl&&c._cwsSession.setStreamUrl(a)},this.onStreamResolutionWidthChange=function(a){c._logger.debug("onStreamResolutionWidthChange(): "+a),c._cwsSession.setStreamResolutionWidth(a);\n},this.onStreamResolutionHeightChange=function(a){c._logger.debug("onStreamResolutionHeightChange(): "+a),c._cwsSession.setStreamResolutionHeight(a)},this.onConnectionTypeChange=function(a){c._logger.debug("onConnectionTypeChange(): "+a),\nc._cwsSession.setConnectionType(a)},this.onLinkEncryptionChange=function(a){c._logger.debug("onLinkEncryptionChange(): "+a),c._cwsSession.setLinkEncryption(a)},this.onPlayerTypeChange=function(a){c._logger.debug("onPlayerTypeChange(): "+a),\nnull==c._cwsSession.getFrameworkName()&&c._cwsSession.setFrameworkName(a)},this.onPlayerVersionChange=function(a){c._logger.debug("onPlayerVersionChange(): "+a),null==c._cwsSession.getFrameworkVersion()&&c._cwsSession.setFrameworkVersion(a);\n},this.onError=function(a,b){c._logger.debug("onError(): "+a+" ("+b+")"),c.reportError(a,b)},this.onRelease=function(){c._logger.debug("onRelease()"),c.detachPlayer()},this.adStart=function(b,d,e){return c._logger.debug("adStart(): adStream="+b+" adPlayer="+d+" adPosition="+e),\nc._adPlaying?void c._logger.warning("adStart(): multiple adStart calls, ignoring"):(c._adPlaying=!0,c._adStream=b,c._adPlayer=d,c._adPosition=e,c._cwsSession._hasJoined||c._cwsSession.togglePauseJoin(!0),\nvoid(c._adStream==a.Client.AdStream.CONTENT||c._adPlayer==a.Client.AdPlayer.SEPARATE?(c._cwsSession._playerState!==h.PlayerState.NOT_MONITORED&&(c._pooledPlayerState=c._cwsSession._playerState),c._cwsSession.setPlayerState(h.PlayerState.NOT_MONITORED),\nc._ignorePlayerState=!0):c._adStream==a.Client.AdStream.SEPARATE&&c._adPlayer==a.Client.AdPlayer.CONTENT&&(c._cwsSession._playerState!==h.PlayerState.NOT_MONITORED&&(c._pooledPlayerState=c._cwsSession._playerState),\nc._cwsSession.setPlayerState(h.PlayerState.NOT_MONITORED),c._ignorePlayerState=!0,c._ignoreBitrateAndResource=!0,c._ignoreEncodedFrameRateAndDuration=!0,c._ignorePlayheadTimeandBufferLength=!0,c._ignoreError=!0)));\n},this.adEnd=function(){return c._logger.debug("adEnd()"),c._adPlaying?(c._cwsSession._hasJoined||c._cwsSession.togglePauseJoin(!1),c._adStream==a.Client.AdStream.CONTENT||c._adPlayer==a.Client.AdPlayer.SEPARATE?c._preloading||(c._ignorePlayerState=!1,\nc._cwsSession.setPlayerState(c._pooledPlayerState)):c._adStream==a.Client.AdStream.SEPARATE&&c._adPlayer==a.Client.AdPlayer.CONTENT&&(c._ignoreBitrateAndResource=!1,c._ignoreEncodedFrameRateAndDuration=!1,\nc._ignorePlayheadTimeandBufferLength=!1,c._ignoreError=!1,c._preloading||(c._ignorePlayerState=!1,c._cwsSession.setPlayerState(c._pooledPlayerState))),c._adPlaying=!1,void(c._adStream=c._adPlayer=c._adPosition=null)):void c._logger.debug("adEnd(): called before adStart, ignoring");\n},this.detachPlayer=function(){c._logger.debug("detachPlayer()"),null!==c._playerStateManager&&(c._exceptionCatcher.runProtected("Session.detachPlayer",function(){c._playerStateManager.removeMonitoringNotifier();\n}),c._playerStateManager=null,c._cwsSession.setPlayerStateManager(null),c._cwsSession.setPlayerState(h.PlayerState.NOT_MONITORED))},this.attachPlayer=function(a){return c._logger.debug("attachPlayer()"),\nnull!=c._playerStateManager?void c._logger.error("attachPlayer(): detach current PlayerStateManager first"):void c._exceptionCatcher.runProtected("Session.attachPlayer()",function(){a.setMonitoringNotifier(c,c._id)?(a.pushCurrentState(),\nc._playerStateManager=a,c._cwsSession.setPlayerStateManager(c._playerStateManager)):c._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")})},this.getPlayerStateManager=function(){\nreturn c._logger.debug("getPlayerStateManager()"),c._playerStateManager},this.contentPreload=function(){return c._logger.debug("contentPreload()"),c._preloading?void c._logger.debug("contentPreload(): called twice, ignoring"):(c._preloading=!0,\nvoid(c._ignorePlayerState=!0))},this.contentStart=function(){return c._logger.debug("contentStart()"),c._preloading?(c._preloading=!1,void(c._adPlaying||(c._ignorePlayerState=!1,c._cwsSession.setPlayerState(c._pooledPlayerState)))):void c._logger.warning("contentStart(): called without contentPreload, ignoring");\n},this.reportError=function(b,d){if(c._logger.info("reportError(): "+b),!C.isValidString(b))return void c._logger.error("reportError(): invalid error message string: "+b);if(d!==a.Client.ErrorSeverity.FATAL&&d!==a.Client.ErrorSeverity.WARNING)return void c._logger.error("reportError(): invalid error severity: "+d);\nif(c._ignoreError)return void c._logger.debug("reportError(): ignored");var e=d===a.Client.ErrorSeverity.FATAL;c._cwsSession.sendError(b,e)},this.updateContentMetadata=function(a){c._logger.debug("updateContentMetadata(): enter"),\nc._exceptionCatcher.runProtected("Session.updateContentMetadata",function(){c.mergeContentMetadata(a),c.setStatesFromContentMetadata()})},this.sendCustomEvent=function(a,b){c._logger.info("sendEvent(): eventName="+a+c.sessionTypeTag()),\nc._cwsSession.enqueueCustomEvent(a,b)},this.mergeContentMetadata=function(b){var d={},f={};if(C.isValidString(b.assetName)&&(c._contentMetadata.assetName!=b.assetName?(null!=c._contentMetadata.assetName&&(d[r.REQUEST_KEY_ASSET_NAME]=c._contentMetadata.assetName),\nf[r.REQUEST_KEY_ASSET_NAME]=b.assetName,c._contentMetadata.assetName=b.assetName):c._logger.warning("mergeContentMetadata(): assetName was not changed.")),C.isValidString(b.applicationName)&&(c._contentMetadata.applicationName!=b.applicationName?(null!=c._contentMetadata.applicationName&&("undefined"==typeof d[r.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(d[r.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),\nd[r.REQUEST_KEY_STREAM_METADATA_CHANGE][r.REQUEST_KEY_PLAYER_NAME]=c._contentMetadata.applicationName),"undefined"==typeof f[r.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(f[r.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),\nf[r.REQUEST_KEY_STREAM_METADATA_CHANGE][r.REQUEST_KEY_PLAYER_NAME]=b.applicationName,c._contentMetadata.applicationName=b.applicationName):c._logger.warning("mergeContentMetadata(): applicationName was not changed.")),\nC.isValidString(b.streamUrl)&&(c._contentMetadata.streamUrl!=b.streamUrl?(null!=c._contentMetadata.streamUrl&&(d[r.REQUEST_KEY_STREAM_URL]=c._contentMetadata.streamUrl),f[r.REQUEST_KEY_STREAM_URL]=b.streamUrl,\nc._contentMetadata.streamUrl=b.streamUrl):c._logger.warning("mergeContentMetadata(): streamUrl was not changed.")),C.isValidString(b.viewerId)&&(c._contentMetadata.viewerId!=b.viewerId?(null!=c._contentMetadata.viewerId&&("undefined"==typeof d[r.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(d[r.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),\nd[r.REQUEST_KEY_STREAM_METADATA_CHANGE][r.REQUEST_KEY_VIEWER_ID]=c._contentMetadata.viewerId),"undefined"==typeof f[r.REQUEST_KEY_STREAM_METADATA_CHANGE]&&(f[r.REQUEST_KEY_STREAM_METADATA_CHANGE]={}),f[r.REQUEST_KEY_STREAM_METADATA_CHANGE][r.REQUEST_KEY_VIEWER_ID]=b.viewerId,\nc._contentMetadata.viewerId=b.viewerId):c._logger.warning("mergeContentMetadata(): viewerId was not changed.")),C.isValidString(b.defaultResource)&&(c._contentMetadata.defaultResource!=b.defaultResource?(null!=c._contentMetadata.defaultResource&&(d[r.REQUEST_KEY_RESOURCE]=c._contentMetadata.defaultResource),\nf[r.REQUEST_KEY_RESOURCE]=b.defaultResource,c._contentMetadata.defaultResource=b.defaultResource):c._logger.warning("mergeContentMetadata(): defaultResource was not changed.")),C.isInteger(b.duration)&&b.duration>0&&(c._contentMetadata.duration!=b.duration?(c._cwsSession._contentLengthSec>0&&(d[r.REQUEST_KEY_CONTENT_LENGTH]=c._cwsSession._contentLengthSec),\nf[r.REQUEST_KEY_CONTENT_LENGTH]=b.duration,c._contentMetadata.duration=b.duration):c._logger.warning("mergeContentMetadata(): duration was not changed.")),C.isInteger(b.encodedFrameRate)&&b.encodedFrameRate>0&&(c._contentMetadata.encodedFrameRate!=b.encodedFrameRate?(c._contentMetadata.encodedFrameRate>-1&&(d[r.REQUEST_KEY_ENCODED_FRAME_RATE]=c._contentMetadata.encodedFrameRate),\nf[r.REQUEST_KEY_ENCODED_FRAME_RATE]=b.encodedFrameRate,c._contentMetadata.encodedFrameRate=b.encodedFrameRate):c._logger.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),b.streamType!=e.StreamType.UNKNOWN&&(c._contentMetadata.streamType!=b.streamType?(c._contentMetadata.streamType!=e.StreamType.UNKNOWN&&(c._contentMetadata.streamType==a.ContentMetadata.StreamType.LIVE?d[r.REQUEST_KEY_IS_LIVE]=!0:d[r.REQUEST_KEY_IS_LIVE]=!1),\nb.streamType==a.ContentMetadata.StreamType.LIVE?f[r.REQUEST_KEY_IS_LIVE]=!0:f[r.REQUEST_KEY_IS_LIVE]=!1,c._contentMetadata.streamType=b.streamType):c._logger.warning("mergeContentMetadata(): streamType was not changed.")),\nC.dictCount(b.custom)>0){var g={},h={};for(var i in b.custom){var j=c._contentMetadata.custom[i];j!=b.custom[i]?(g[i]=b.custom[i],c._contentMetadata.custom[i]&&(h[i]=c._contentMetadata.custom[i]),c._contentMetadata.custom[i]=b.custom[i]):c._logger.info("mergeContentMetadata(): custom."+i+" was not changed.");\n}C.dictCount(g)>0?(C.dictCount(h)>0&&(d[r.REQUEST_KEY_TAGS]=h),f[r.REQUEST_KEY_TAGS]=g):c._logger.warning("mergeContentMetadata(): custom was not changed.")}C.dictCount(f)>0&&c._cwsSession.declareStateChange(f,d);\n},this.isGlobalSession=function(){return c._global==u.SESSION_TYPE.GLOBAL},this.isVideoSession=function(){return c._global==u.SESSION_TYPE.VIDEO},this.isAdSession=function(){return c._global==u.SESSION_TYPE.AD;\n},this.sessionTypeTag=function(){return c.isGlobalSession()?" (global session)":""}});v.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var w=b.SessionFactory=function(){\nfunction a(a,c,d,e){b._client=a,b._clientSettings=c,b._clientConfig=d,b._systemFactory=e,b._logger=b._systemFactory.buildLogger(),b._logger.setModuleName("SessionFactory"),b._nextSessionKey=0,b._sessionsByKey={};\n}var b=this;b._logger=null,b._logBuffer=null,b._nextSessionKey=0,b._sessionsByKey=null,a.apply(b,arguments),this.cleanup=function(){b._logger=null,b._logBuffer=null;for(var a in b._sessionsByKey){var c=b._sessionsByKey[a];\nc.cleanup()}b._sessionsByKey=null,b._nextSessionKey=0},this.newSessionKey=function(){var a=b._nextSessionKey;return b._nextSessionKey++,a},this.makeVideoSession=function(a,c){return null==a&&(a=new e),\nb.makeSession(a,c)},this.makeGlobalSession=function(a){return b.makeSession(a,u.SESSION_TYPE.GLOBAL)},this.generateSessionId=function(){return F.integer32()},this.makeSession=function(a,c){var d=a.clone(),e=b.generateSessionId(),f=b._systemFactory.buildSession(b._client,b._clientSettings,b._clientConfig,e,c,d),g=b.newSessionKey();\nreturn b.addSession(g,f),f.start(),g},this.getSession=function(a){var c=b._sessionsByKey[a];return null==c&&b._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),c},this.getVideoSession=function(a){\nvar c=this.getSession(a);return null!=c&&(c.isVideoSession()||c.isAdSession()||(b._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),c=null)),c},this.addSession=function(a,c){\nb._sessionsByKey[a]=c},this.removeSession=function(a){delete b._sessionsByKey[a]},this.cleanupSession=function(a){var c=b.getSession(a);b.removeSession(a),c.cleanup()}},x=b.CallbackWithTimeout=function(a){\nthis._timer=a,this.getWrapperCallback=function(a,b,c){var d=!1,e=function(){d||(d=!0,a(!1,c+" ("+b+" ms)"))};this._timer.createOnce(e,b,"CallbackWithTimeout.wrap");var f=function(b,c){d||(d=!0,a(b,c))};\nreturn f}},y=b.Config=function(a,b,c){var d=this;this._logger=a,this._logger.setModuleName("Config"),this._storage=b,this._jsonInterface=c,this._defaultConfig={clientId:r.DEFAULT_CLIENT_ID,sendLogs:!1,\nmaxHbInfos:r.DEFAULT_MAX_HEARTBEAT_INFOS},this._config=C.ObjectShallowCopy(this._defaultConfig),this._loaded=!1,this._loadedEmpty=!1,this._waitingConsumers=[],this.isReady=function(){return this._loaded;\n},this.load=function(){var a=function(a,b){a?(d._parse(b),d._logger.debug("load(): configuration successfully loaded from local storage"+(d._loadedEmpty?" (was empty)":"")+".")):d._logger.error("load(): error loading configuration from local storage: "+b),\nd._loaded=!0,d._notify()};this._storage.load(y.STORAGE_KEY,a)},this._parse=function(a){var b=this._jsonInterface.decode(a);if(null==b)return void(this._loadedEmpty=!0);var c=b[y.CONFIG_STORAGE_KEY_CLIENT_ID];\nnull!=c&&c!=r.DEFAULT_CLIENT_ID&&""!=c&&"null"!=c&&(this._config[y.CONFIG_KEY_CLIENT_ID]=c,this._logger.debug("parse(): loaded clientId="+c+" (from local storage)"))},this._marshall=function(){var a={};\nreturn a[y.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(a)},this.save=function(){\nvar a=function(a,b){a?d._logger.debug("save(): configuration successfully saved to local storage."):d._logger.error("save(): error saving configuration to local storage: "+b)};this._storage.save(y.STORAGE_KEY,this._marshall(),a);\n},this.register=function(a){return this.isReady()?void a():void this._waitingConsumers.push(a)},this.get=function(a){return this._loaded?this._config[a]:null},this.set=function(a,b){this._loaded&&(this._config[a]=b);\n},this._notify=function(){for(var a;null!=(a=this._waitingConsumers.shift());)a()}};y.STORAGE_KEY="sdkConfig",y.CONFIG_STORAGE_KEY_CLIENT_ID="clId",y.CONFIG_KEY_CLIENT_ID="clientId",y.CONFIG_KEY_SEND_LOGS="sendLogs",\ny.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos";var z=b.EventQueue=function(){this._events=[],this._nextEventNumber=0,this.enqueue=function(a){this._events.push(a)},this.getNumber=function(){var a=this._nextEventNumber;\nreturn this._nextEventNumber++,a},this.flush=function(){var a=this._events;return this._events=[],a}},A=b.ExceptionCatcher=function(a,b,c){this._logger=a,this._logger.setModuleName("ExceptionCatcher"),\nthis._ping=b,this._systemSettings=c,this.runProtected=function(a,b,c){try{b()}catch(d){if(null!=c)c(d);else{if(this._systemSettings.allowUncaughtExceptions)throw d;this.onUncaughtException(a,d)}}},this.onUncaughtException=function(a,b){\nvar c="Uncaught exception: "+a+": "+b.toString();if(null!=this._ping)try{this._ping.send(c)}catch(d){this._logger.error("Caught exception while sending ping: "+d.toString())}this._logger.error(c)}},B=b.GatewayControl=function(a,b,c,d){\nvar e=this;this._clientSettings=a,this._logger=b,this._logger.setModuleName("GatewayControl"),this._httpClient=c,this._jsonInterface=d,this.send=function(a,b){var c=this._jsonInterface.encode(a),d=this._clientSettings.gatewayUrl+r.gatewayPath,f=function(a,c){\nif(a){var d=e._jsonInterface.decode(c);b(a,d)}else{var f=c;b(a,f)}};this._httpClient.request("POST",d,c,"application/json",f)}},C=b.Lang={};C.isMeaningfulString=function(a){return C.isValidString(a)&&null!=a&&"undefined"!=a&&"null"!=a;\n},C.sanitizeStringToStringObject=function(a){var b={};for(var c in a)if(C.isMeaningfulString(c)){var d=a[c];C.isMeaningfulString(d)&&(b[c]=d)}return b},C.validateInterface=function(a,b,c){if(null==a)throw new Error("Expected "+c+" implementation is null.");\nfor(var d in b)if("function"!=typeof a[d])throw new Error("Expected method "+d+" in "+c+" implementation.")},C.dictCount=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},C.ToString=function(a){\nreturn""+a},C.NumberToInt=function(a){return Math.floor(a)},C.NumberToUnsignedInt=function(a){return Math.abs(C.NumberToInt(a))},C.AsBoolean=function(a){return Boolean(a)},C.isValidString=function(a){return"string"==typeof a&&""!==a;\n},C.stringStartsWith=function(a,b){return"string"!=typeof a||"string"!=typeof b?!1:"function"==typeof a.indexOf?0===a.indexOf(b):!1},C.isBoolean=function(a){return"boolean"==typeof a},C.UrlEncodeString=function(a){\nreturn escape(a)},C.isObject=function(a){return"object"==typeof a},C.ObjectToString=function(a){var b="";for(var c in a){var d=a[c],e=d;b+=c+"="+e}return"Object{"+b+"}"},C.ObjectShallowCopyOmitNull=function(a){\nvar b=C.ObjectShallowCopy(a);for(var c in b)null==b[c]&&delete b[c];return b},C.ObjectShallowCopy=function(a){var b={};for(var c in a)b[c]=a[c];return b},C.ObjectShallowEquals=function(a,b){if(typeof a!=typeof b)return!1;\nif(a instanceof Object&&b instanceof Object){if(C.dictCount(a)!==C.dictCount(b))return!1;var c=!0;for(var d in a)if(c=a[d]===b[d],!c)return!1;return!0}return a===b},C.isInteger=function(a){if("number"!=typeof a)return!1;\nvar b=Math.round(a);return b===a},C.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},C.ArrayEquals=function(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;\nfor(var c=0;c<a.length;++c)if(C.isArray(a[c])&&C.isArray(b[c])){if(!C.ArrayEquals(a[c],b[c]))return!1}else if(a[c]!==b[c])return!1;return!0},C.isObjectDefinePropertyPresent=function(){return"undefined"!=typeof Object.defineProperty&&function(){\ntry{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}()},C.defGet=function(a,b,c){if(C.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:c});else{\nif("undefined"==typeof a.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");a.__defineGetter__(b,c)}},C.defSet=function(a,b,c){if(C.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{\nconfigurable:!0,set:c});else{if("undefined"==typeof a.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");a.__defineSetter__(b,c)}},function(){\nvar a={};a.two32=4294967296,a.MaxValue=a.two32-1,a.MinValue=0,C.UInt32=a,C.UInt32.Cast=function(b){var c=parseInt(b,10);return c>a.MaxValue?c%=a.two32:c<a.MinValue&&(c=-c%a.two32,c=a.two32-c),c},C.UInt32.InRange=function(b){\nvar c=parseInt(b,10);return c<=a.MaxValue&&c>=a.MinValue};var b={};b.MaxValue=2147483647,b.MinValue=-2147483648,C.Int32=b,C.Int32.Cast=function(a){var c=parseInt(a,10);return c>b.MaxValue?c%=b.MaxValue:c<b.MinValue&&(c=-c%b.MaxValue,\nc=b.MaxValue-c),c},C.Int32.InRange=function(a){var c=parseInt(a,10);return c<=b.MaxValue&&c>=b.MinValue}}();var D=b.LogBuffer=function(){var a=32;this._buffer=[],this.add=function(b){this._buffer.length>=a&&this._buffer.shift(),\nthis._buffer.push(b)},this.flush=function(){var a=this._buffer;return this._buffer=[],a}},E=b.Ping=function(a,b,d){this._isSendingPing=!1,this._cachedBasePingUrl=null,this._logger=a,this._logger.setModuleName("Ping"),\nthis._httpClient=b,this._clientSettings=d,this.send=function(a){if(!this._isSendingPing){this._isSendingPing=!0;var b=this.getBasePingUrl()+"&d="+C.UrlEncodeString(a.toString());this._logger.error("send(): "+b),\nthis._httpClient.request("GET",b,null,null,null),this._isSendingPing=!1}},this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var a=E.SERVICE_URL+"?comp="+E.COMPONENT_NAME+"&clv="+c.version;if(this._clientSettings&&(a+="&cid="+this._clientSettings.customerKey),\na+="&sch="+r.SDK_METADATA_SCHEMA,!this._clientSettings)return a;this._cachedBasePingUrl=a}return this._cachedBasePingUrl}};E.COMPONENT_NAME="sdkjs",E.SERVICE_URL="https://pings.conviva.com/ping.ping";var F=b.Random={};\nF.maxUInt32=4294967295,F.maxInt32=2147483647,F.minInt32=-2147483648,F.integer32=function(){return Math.floor(Math.random()*F.maxUInt32)+F.minInt32},F.uinteger32=function(){return Math.floor(Math.random()*F.maxUInt32);\n};var G=b.Sanitize={};G.Integer=function(a,b,c,d){if(isNaN(a))return d;if("number"!=typeof a)return d;if(a==d)return d;var e=C.NumberToInt(a);return G.EnforceBoundaries(e,b,c)},G.EnforceBoundaries=function(a,b,c){\nreturn null!=c&&a>c?a=c:null!=b&&b>a&&(a=b),a},G.sanitizeSpecialIntegerValue=function(a){return-1==a||-2==a?a:a=G.Integer(a,0,null,-1)};var H=(b.StreamerError=function(){function a(a,c){b.errorCode=a,b.severity=c;\n}var b=this;b.errorCode=null,b.severity=c.ErrorSeverity.FATAL,a.apply(b,arguments)},b.HttpClient=function(a,b,c,d){this._logger=a,this._logger.setModuleName("HttpClient"),this._httpInterface=b,this._callbackWithTimeout=c,\nthis._systemSettings=d,this.request=function(a,b,c,d,e){var f=1e3*this._systemSettings.httpTimeout,g=this._callbackWithTimeout.getWrapperCallback(e,f,"HTTP timeout");this._logger.debug("request(): calling HttpInterface.makeRequest"),\nthis._httpInterface.makeRequest(a,b,c,d,f,g)}}),I=b.Logger=function(a,b,c,d,e){this._loggingInterface=a,this._timeInterface=b,this._settings=c,this._logBuffer=d,this._packageName=e,this.debug=function(a){\nthis.log(a,g.LogLevel.DEBUG)},this.info=function(a){this.log(a,g.LogLevel.INFO)},this.warning=function(a){this.log(a,g.LogLevel.WARNING)},this.error=function(a){this.log(a,g.LogLevel.ERROR)},this.log=function(a,b){\nvar c=this.formatMessage(a,b);this._logBuffer.add(c),this._settings.logLevel<=b&&this._loggingInterface.consoleLog(c,b)},this.prependModuleName=function(a){var b=a;return b="["+this._moduleName+"] "+b},\nthis.prependPackageName=function(a){var b=a;return b="["+this._packageName+"] "+b},this.prependConvivaNamespace=function(a){var b=a;return b="[Conviva] "+b},this.prependTime=function(a){var b=this._timeInterface.getEpochTimeMs(),c=(b/1e3).toFixed(3).toString();\nreturn"["+c+"] "+a},this.prependLogLevel=function(a,b){var c=I.getLogLevelString(b),d=a;return d="["+c+"] "+d},this.prependSessionId=function(a){var b=a;return null!=this._sessionId&&(b="sid="+this._sessionId+" "+b),\nb},this.setSessionId=function(a){this._sessionId=a},this.setModuleName=function(a){this._moduleName=a},this.formatMessage=function(a,b){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(a))),b)));\n}};I.getLogLevelString=function(a){var b;switch(a){case g.LogLevel.ERROR:b="ERROR";break;case g.LogLevel.WARNING:b="WARNING";break;case g.LogLevel.INFO:b="INFO";break;case g.LogLevel.DEBUG:b="DEBUG"}return b;\n};var J=b.Storage=function(a,b,c,d){this._logger=a,this._logger.setModuleName("Storage"),this._storageInterface=b,this._callbackWithTimeout=c,this._systemSettings=d,this.load=function(a,b){var c=this._callbackWithTimeout.getWrapperCallback(b,1e3*this._systemSettings.storageTimeout,"storage load timeout");\nthis._logger.debug("load(): calling StorageInterface.loadData"),this._storageInterface.loadData(J.STORAGE_SPACE,a,c)},this.save=function(a,b,c){var d=this._callbackWithTimeout.getWrapperCallback(c,1e3*this._systemSettings.storageTimeout,"storage save timeout");\nthis._logger.debug("save(): calling StorageInterface.saveData"),this._storageInterface.saveData(J.STORAGE_SPACE,a,b,d)}};J.STORAGE_SPACE="Conviva";var K=b.SystemMetadata=function(b,c,d){this._logger=b,\nthis._logger.setModuleName("SystemMetadata"),this._metadataInterface=c,this._exceptionCatcher=d,this._cachedMetadata=null,this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata;\n},this.retrieve=function(){function b(a,b){d._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+a,function(){var c=b[a];b[a]=c.call(d._metadataInterface)})}var c={};c[K.BROWSER_NAME]=this._metadataInterface.getBrowserName,\nc[K.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion,c[K.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand,c[K.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer,c[K.DEVICE_MODEL]=this._metadataInterface.getDeviceModel,\nc[K.DEVICE_TYPE]=this._metadataInterface.getDeviceType,c[K.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion,c[K.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName,c[K.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion,\nc[K.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName,c[K.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion,c[K.DEVICE_CATEGORY]=this._metadataInterface.getDeviceCategory;\nvar d=this;this._logger.debug("retrieve(): calling MetadataInterface methods");for(var e in c)b(e,c),C.isValidString(c[e])||delete c[e];var f=!1;if("undefined"!=typeof c[K.DEVICE_TYPE]){for(var g in a.Client.DeviceType)if(c[K.DEVICE_TYPE]===a.Client.DeviceType[g]){\nf=!0;break}f||delete c[K.DEVICE_TYPE]}if(f=!1,"undefined"!=typeof c[K.DEVICE_CATEGORY]){for(var h in a.Client.DeviceCategory)if(c[K.DEVICE_CATEGORY]===a.Client.DeviceCategory[h]){f=!0;break}f||delete c[K.DEVICE_CATEGORY];\n}this._cachedMetadata=C.ObjectShallowCopyOmitNull(c)}};K.BROWSER_NAME="browserName",K.BROWSER_VERSION="browserVersion",K.DEVICE_BRAND="deviceBrand",K.DEVICE_MANUFACTURER="deviceManufacturer",K.DEVICE_MODEL="deviceModel",\nK.DEVICE_TYPE="deviceType",K.DEVICE_VERSION="deviceVersion",K.FRAMEWORK_NAME="frameworkName",K.FRAMEWORK_VERSION="frameworkVersion",K.OPERATING_SYSTEM_NAME="operatingSystemName",K.OPERATING_SYSTEM_VERSION="operatingSystemVersion",\nK.DEVICE_CATEGORY="deviceCategory";var L=b.Time=function(a,b){this._timeInterface=a,this._logger=b,this._logger.setModuleName("Time"),this.current=function(){var a=this._timeInterface.getEpochTimeMs();return C.isInteger(a)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+a+")"),\na}},M=b.Timer=function(a,b,c){var d=this;this._logger=a,this._logger.setModuleName("Timer"),this._timerInterface=b,this._exceptionCatcher=c,this.create=function(a,b,c){var e=function(){d._exceptionCatcher.runProtected(c,function(){\na()})},f=this.createTimer(e,b,c);return f},this.createOnce=function(a,b,c){var e={cancel:null},f=function(){d._exceptionCatcher.runProtected(c,function(){e&&"function"==typeof e.cancel&&(e.cancel(),e.cancel=null,\ne=null),a()})},g=this.createTimer(f,b,c);return e.cancel=g,g},this.createTimer=function(a,b,c){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(a,b,c);\n}}}()}(),a});'},446:function(e,t,n){"use strict";n.r(t);n(11),n(443);function a(e){this.consoleLog=function(t,n){"undefined"!=typeof console&&(console.log&&n===e.SystemSettings.LogLevel.DEBUG||n===e.SystemSettings.LogLevel.INFO?console.log(t):console.warn&&n===e.SystemSettings.LogLevel.WARNING?console.warn(t):console.error&&n===e.SystemSettings.LogLevel.ERROR&&console.error(t))},this.release=function(){}}function r(e,t,n){this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceCategory=function(){return window.Conviva.Client.DeviceCategory.WEB},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return e.frameworkName?e.frameworkName:t},this.getFrameworkVersion=function(){return e.frameworkVersion?e.frameworkVersion:n},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.release=function(){}}function i(){this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}}function o(){this.createTimer=function(e,t,n){var a=setInterval(e,t);return function(){-1!==a&&(clearInterval(a),a=-1)}},this.release=function(){}}n(14),n(186);function s(){this.makeRequest=function(e,t,n,a,r,i){return this.makeRequestStandard(e,t,n,a,r,i)},this.makeRequestStandard=function(e,t,n,a,r,i){if(window.pageTerminating&&"function"==typeof fetch)return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:n,keepalive:!0}),null;var o=new XMLHttpRequest;return o.open(e,t,!window.pageTerminating),a&&o.overrideMimeType&&(o.overrideMimeType=a),a&&o.setRequestHeader&&o.setRequestHeader("Content-Type",a),r>0&&(o.timeout=r,o.ontimeout=function(){o.ontimeout=o.onreadystatechange=null,i&&i(!1,"timeout after "+r+" ms")}),o.onreadystatechange=function(){4===o.readyState&&(o.ontimeout=o.onreadystatechange=null,200==o.status?i&&i(!0,o.responseText):i&&i(!1,"http status "+o.status))},o.send(n),null},this.release=function(){}}n(33);var c=window.localStorage;function l(){this.saveData=function(e,t,n,a){var r=e+"."+t;try{c.setItem(r,n),a(!0,null)}catch(e){a(!1,e.toString())}},this.loadData=function(e,t,n){var a=e+"."+t;try{n(!0,c.getItem(a))}catch(e){n(!1,e.toString())}},this.release=function(){}}n(27),n(132),n(271),n(194);var u=window.anvp.AnvatoCustomPluginInterface,_=u.services,d=u.nodeInfo;function E(e,t,n,a,r,i){var o,s=e.PlayerStateManager.PlayerState,c=e.Client,l=-1,u=null,E=null,f=null,g=null,h=!1,S=null,p=null,T=null,b=null,v=null,m=0,y=0,R=!1,C=!1,A=null,N=!1,I=!1,P=!1,M=!1,O=!1,w=!1;this.sendBeacon=function(e,t,a,r){var i=t.contentInfo;switch(e){case"METADATA_LOADED":if(t.failoverInProgress&&!P)break;this.closeAndCleanupSession(t),(o=_.getDerivedMetadata("plugins:conviva:mapping:","")).context&&(o.context=_.getDerivedMetadata("plugins:conviva:mapping:context:","")),o=_.injectMacros(o),this.updateConvivaContentMetadata(t),this.updatePlayerStateManager(t,n),this.updateConvivaPlayerState(s.BUFFERING);break;case"PROGRAM_CHANGED":O=!0,this.updateConvivaContentMetadata(t),this.updateContentAssetName(t);break;case"USER_PLAY":if(t.failoverInProgress)break;case"VIDEO_STARTED":this.hasValidConvivaSession()||(this.updateConvivaContentMetadata(t),this.createConvivaSession(t),this.updateContentAssetName(t),this.attachPlayerToSession()),I=!0;break;case"USER_RESUME":case"PLAYING_START":case"USER_GOLIVE":"playingAdContent"===t.playerState?this.updateConvivaAdPlayerState(s.PLAYING):(this.updateConvivaPlayerState(s.PLAYING),M=!0);break;case"USER_PAUSE":this.updateConvivaPlayerState(s.PAUSED);break;case"STATE_CHANGE":"pausedVideoContent"==t.playerState&&this.updateConvivaPlayerState(s.PAUSED,!0),"playingVideoContent"==t.playerState&&(R&&this.adTrackingComplete(t),C&&this.adBreakTrackingComplete(t),I||this.updateConvivaPlayerState(s.PLAYING,!0));break;case"PLAYLIST_ITEM_CHANGED":break;case"BUFFER_START":this.updateConvivaPlayerState(s.BUFFERING,!t.isLive);break;case"BUFFER_END":this.trackBufferCompleted(t);break;case"USER_FORWARD_SEEK":case"USER_BACKWARD_SEEK":n.setPlayerSeekStart(t.seekingTo),N=!0;break;case"BITRATE_CHANGED":R?i.adIsClientSideInsertion||b.setBitrateKbps(t.currentBitrate):n.setBitrateKbps(t.currentBitrate);break;case"PLAYER_ERROR":var c=a[0],l=a[1];this.trackPlayerError(t,c,l);break;case"VIDEO_COMPLETED":this.updateConvivaPlayerState(s.STOPPED),t.isPostrollExpected?P=!0:this.closeAndCleanupSession(t);break;case"AD_BREAK_STARTED":y=a[1],this.adBreakTrackingStart(t,a[0],y);break;case"AD_BREAK_COMPLETED":this.adBreakTrackingComplete(t,a[0],y||null);break;case"AD_STARTED":this.adTrackingStart(t,a[0],a[1],a[2]);break;case"AD_SKIPPED":case"AD_COMPLETED":this.adTrackingComplete(t);break;case"PLAYER_EXIT":this.closeAndCleanupSession(t);break;case"CDN_PROVIDER_UPDATED":this.updateConvivaContentMetadata(t);break;case"PROGRAM_ENDED":this.closeAndCleanupSession(t)}},this.updateConvivaPlayerState=function(e,a){if(R&&!a)return this.updateConvivaAdPlayerState(e);t("updateConvivaPlayerState:Main:"+e),n&&this.hasValidConvivaSession()&&n.getPlayerState()!=e&&n.setPlayerState(e)},this.updateConvivaAdPlayerState=function(n){t("updateConvivaPlayerState:Ad:"+n),b&&this.hasValidConvivaSession()&&T!==e.NO_SESSION_KEY&&b.getPlayerState()!=n&&b.setPlayerState(n)},this.updateConvivaContentMetadata=function(n){t("updateConvivaContentMetadata");var r=n.contentInfo,i=parseInt(o.duration);Number.isNaN(i)?r.duration&&(u=parseInt(r.duration)):u=i,f?(f.duration=u,f.defaultResource=r.cdnProvider||o.defaultResource,u=f.duration,f.custom=o.context?o.context:{},null!=g&&a.updateContentMetadata(g,f)):((f=new e.ContentMetadata).streamUrl=o.streamUrl?o.streamUrl:r.videoURL,f.streamType=n.isLive?e.ContentMetadata.StreamType.LIVE:e.ContentMetadata.StreamType.VOD,f.defaultBitrateKbps=n.currentBitrate,f.applicationName=o.applicationName?o.applicationName:r.playerName,f.viewerId=o.viewerId,f.duration=u,f.defaultResource=r.cdnProvider||o.defaultResource,f.encodedFrameRate=o.encodedFrameRate?parseInt(o.encodedFrameRate):30,f.custom=o.context?o.context:{})},this.updatePlayerStateManager=function(e,n){t("updatePlayerStateManager");var a=e.contentInfo,r=d.videoNode,i=o.encodedFrameRate?parseInt(o.encodedFrameRate):30,s=Math.max(r.offsetWidth,r.clientWidth),c=Math.max(r.offsetHeight,r.clientHeight);s=s||parseInt(window.getComputedStyle(r).getPropertyValue("width")),c=c||parseInt(window.getComputedStyle(r).getPropertyValue("height")),n.setDuration(o.duration?o.duration:a.duration),!isNaN(s)&&s>=0&&n.setVideoResolutionWidth(s),!isNaN(c)&&c>=0&&n.setVideoResolutionHeight(c),i&&(i=parseInt(i),isNaN(i)||n.setEncodedFrameRate(i))},this.updateContentAssetName=function(e){if(t("updateContentAssetName"),!w&&f&&this.hasValidConvivaSession()){var n=e.contentInfo,a=null;o.assetName?a=o.assetName:e.isLive&&!O||(a=n.contentTitle),a&&(f.assetName=a,this.updateConvivaContentMetadata(e),delete f.assetName,w=!0)}},this.createConvivaSession=function(n){t("createConvivaSession"),f&&!this.hasValidConvivaSession()&&(g=a.createSession(f),w=!1,g===e.Client.NO_SESSION_KEY&&i("Conviva.Client.NO_SESSION_KEY"))},this.attachPlayerToSession=function(){t("attachPlayerToSession"),g==e.Client.NO_SESSION_KEY||null==a||a.isPlayerAttached(g)||a.attachPlayer(g,n)},this.trackBufferCompleted=function(e){t("trackBufferCompleted"),"playingVideoContent"===e.playerState&&M&&this.updateConvivaPlayerState(s.PLAYING,!0),"pausedVideoContent"===e.playerState&&this.updateConvivaPlayerState(s.PAUSED,!0)},this.adBreakTrackingStart=function(e,t,n){if(!C){switch("preroll"!=e.adPodType&&this.detachPlayerFromSession(),m+=1,e.adPodType){case"preroll":v=c.AdPosition.PREROLL;break;case"midroll":v=c.AdPosition.MIDROLL;break;case"postroll":v=c.AdPosition.POSTROLL}a.adStart(g,c.AdStream.SEPARATE,c.AdPlayer.SEPARATE,v);var r={podPosition:this.getAdPositionForConvivaClient(e.adPodType),podIndex:String(m),absoluteIndex:String(e.adPodIndex+1)};n&&(r.podDuration=String(n)),a.sendCustomEvent(g,"Conviva.PodStart",r),C=!0}},this.adBreakTrackingComplete=function(e,t,n){if(C){a.adEnd(g);var r={podPosition:this.getAdPositionForConvivaClient(e.adPodType),podIndex:String(m),absoluteIndex:String(e.adPodIndex+1)};n&&(r.podDuration=String(n)),a.sendCustomEvent(g,"Conviva.PodEnd",r),"postroll"===e.adPodType?this.closeAndCleanupSession(e):this.attachPlayerToSession(),C=!1,y=null}},this.adTrackingStart=function(n,r,i,c){var l=n.contentInfo;if(t("adTrackingStart: "+r+" :  "+i),T&&R&&r==A)return t("adTrackingStart, already tracking this ad, update ad metadata"),p.assetName=i||r,p.streamUrl=l.adMediaURL,p.duration=l.adDuration,p.custom=this.getAdMetadata(n,c,r,i),void a.updateContentMetadata(T,p);t("adSessionKey: "+T),t("isTrackingAd: "+R),t("content.adId: "+l.adId),t("adId: "+r),t("trackingAdId: "+A),(p=new e.ContentMetadata).assetName=i||r,p.streamUrl=l.adMediaURL,p.streamType=n.isLive?e.ContentMetadata.StreamType.LIVE:e.ContentMetadata.StreamType.VOD,p.applicationName=o.applicationName?o.applicationName:l.playerName,p.viewerId=o.viewerId,p.duration=l.adDuration,p.defaultResource=o.defaultResource,p.encodedFrameRate=o.encodedFrameRate?parseInt(o.encodedFrameRate):30,p.custom=this.getAdMetadata(n,c,r,i),b?b.reset():b=a.getPlayerStateManager(),(T=a.createAdSession(g,p))!==e.NO_SESSION_KEY&&(a.attachPlayer(T,b),this.updatePlayerStateManager(n,b),this.updateConvivaAdPlayerState(s.PLAYING),R=!0,A=r),l.adIsClientSideInsertion||b.setBitrateKbps(n.currentBitrate)},this.adTrackingComplete=function(t){T!==e.NO_SESSION_KEY&&(this.updateConvivaAdPlayerState(s.STOPPED),a.cleanupSession(T),b.reset()),T=null,R=!1},this.getAdMetadata=function(e,t,n,a){var r,i,s,c,l=e.contentInfo;l.vastAdWrapperIds&&l.vastAdWrapperIds.length?(c=l.vastAdWrapperIds.length-1,r=l.vastAdWrapperIds[c]):r=n||l.adId,l.vastWrapperAdSystems&&l.vastWrapperAdSystems.length?(c=l.vastWrapperAdSystems.length-1,i=l.vastWrapperAdSystems[c]):i=l.vastAdSystem||t,l.vastWrapperCreativeIds&&l.vastWrapperCreativeIds.length?(c=l.vastWrapperCreativeIds.length-1,s=l.vastWrapperCreativeIds[c]):s=l.vastCreativeId;var u={};if(u["c3.ad.technology"]=l.adIsClientSideInsertion?"Client Side":"Server Side",u["c3.ad.id"]=n||(l.adId||"NA"),u["c3.ad.system"]=t,u["c3.ad.position"]=this.getAdPositionForConvivaClient(e.adPodType),u["c3.ad.mediaFileApiFramework"]=l.vastApiFramework||"NA",u["c3.ad.isSlate"]="false",u["c3.ad.adStitcher"]=l.adIsClientSideInsertion?"NA":"Google Anvato DCS",u["c3.ad.creativeId"]=l.vastCreativeId||"NA",u["c3.ad.sequence"]=l.adIndex?""+l.adIndex:"NA",u["c3.ad.firstAdId"]=r||"NA",u["c3.ad.firstAdSystem"]=i||"NA",u["c3.ad.firstCreativeId"]=s||"NA",u["c3.ad.adUnitName"]=a||"NA",u["c3.ad.creativeName"]="NA",u["c3.ad.breakId"]="NA",u["c3.ad.category"]="NA",u["c3.ad.advertiser"]="NA",u["c3.ad.advertiserCategory"]="NA",u["c3.ad.advertiserId"]="NA",u["c3.ad.campaignName"]="NA",u["c3.ad.dayPart"]="NA",u["c3.ad.adManagerName"]="NA",u["c3.ad.adManagerVersion"]="NA",u["c3.ad.sessionStartEvent"]="NA",o.adContext)for(var _ in o.adContext)({}).hasOwnProperty.call(o.adContext,_)&&(u[_]=o.adContext[_]);return u},this.detachPlayerFromSession=function(){t("detachPlayerFromSession"),this.hasValidConvivaSession()&&a.detachPlayer(g)},this.closeAndCleanupSession=function(e){t("closeAndCleanupSession"),R&&e&&this.adTrackingComplete(e),this.hasValidConvivaSession()&&null!=a&&(this.detachPlayerFromSession(),a.cleanupSession(g)),g=null,v=null,m=0,R=!1,C=!1,N=!1,P=!1,I=!1,O=!1},this.hasValidConvivaSession=function(){return void 0!==g&&"number"==typeof g&&g!=e.Client.NO_SESSION_KEY},this.updateTime=function(e,a,r){(!u&&a&&this.updateConvivaContentMetadata(r),N&&!r.isVideoSeeking&&(n.setPlayerSeekEnd(),N=!1),l!=e||R||C)?(h?(t("Player stalled ended, resuming tracking."),h=!1,this.trackBufferCompleted(r)):S&&(S=null),l=e):h||(S?(new Date).getMilliseconds()-S>1e3&&(t("Player stalled started, tracking as buffering."),h=!0,S=null,this.updateConvivaPlayerState(s.BUFFERING,!0)):S=(new Date).getMilliseconds())},this.trackPlayerError=function(e,n,r){if("string"!=typeof n||!n.startsWith("DFP")&&"ADST001"!==n){if(t("trackPlayerError: ",n,r,e.isFatalError),e.completedVideoContent)a.cleanupSession(g);else if(this.hasValidConvivaSession()){var i=e.isFatalError?c.ErrorSeverity.FATAL:c.ErrorSeverity.WARNING;a.reportError(g,r,i),e.isFatalError&&(I=!1)}}else P&&this.closeAndCleanupSession(e),this.trackPlayerAdError(e,n,r)},this.trackPlayerAdError=function(n,r,i){t("trackPlayerAdError: ",r,":",i);var s=n.contentInfo;if("DFP010"===r&&i&&i.indexOf("SDK enforced ad progress timeout")>-1)t("ignoring SDK enforced ad progress timeout error");else{if(null===T){(p=new e.ContentMetadata).assetName=s.adTitle||"Ad Request Failed",p.streamType=n.isLive?e.ContentMetadata.StreamType.LIVE:e.ContentMetadata.StreamType.VOD,p.applicationName=o.applicationName?o.applicationName:s.playerName,p.viewerId=o.viewerId,p.duration=s.adDuration,p.defaultResource=o.defaultResource,p.encodedFrameRate=parseInt(o.encodedFrameRate);var l="DFP010"===r?"dfp":"";p.custom=this.getAdMetadata(n,l),"DFP010"===r?(p.custom["c3.ad.technology"]="Client Side",p.custom["c3.ad.adStitcher"]="NA"):"ADST001"===r&&(p.custom["c3.ad.technology"]="Server Side"),T=a.createAdSession(g,p),b?b.reset():b=a.getPlayerStateManager(),T!==e.NO_SESSION_KEY&&(a.attachPlayer(T,b),this.updatePlayerStateManager(n,b))}a.reportError(T,i,c.ErrorSeverity.FATAL),R?(this.adTrackingComplete(n),this.adBreakTrackingComplete()):T&&null!==a&&(t("closeAndCleanup AdSession",T),a.cleanupSession(T)),T=null,v=null,m=0,R=!1}},this.getAdPositionForConvivaClient=function(e){switch(e){case"preroll":return"Pre-roll";case"midroll":return"Mid-roll";case"postroll":return"Post-roll";default:return""}},this.getClientMeasureInterface=function(){return E||((E={}).getPHT=function(){return 1e3*l},E.getBufferLength=function(){return-1},E.getSignalStrength=function(){return e.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH},E.getRenderedFrameRate=function(){return e.PlayerStateManager.DEFAULT_RENDERED_FRAME_RATE},E.cleanup=function(){n=null},E)},this.destroy=function(){this.closeAndCleanupSession()},n.setClientMeasureInterface(this.getClientMeasureInterface())}!function(e,t){var n=e.AnvatoCustomPluginInterface,c=n.util,u=window.Conviva,_=function(){};function d(){n.call(this,"conviva")}d.prototype=Object.create(n.prototype),d.prototype.init=function(e,t,n){this.config=t,this.waitForProgramChange=!1,this.eventQueue=[],this.trackedPlayhead=-1;var a=t.sdk?t.sdk:"./conviva-core-sdk.min.js",r=this;u?this.initConvivaSDK(e,n):c.loadJS(a,"head",(function(){u=window.Conviva,r.initConvivaSDK(e,n)}))},d.prototype.initConvivaSDK=function(e,t){var n=new u.SystemSettings,c=this.config,d=t;void 0!==this.config.logLevel&&(n.logLevel=parseInt(this.config.logLevel),n.logLevel<=1&&(_=function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];(e=console).log.apply(e,["[ConvivaPlugin]\t"].concat(n))})),n.allowUncaughtExceptions=!1,n.httpTimeout=10,n.storageTimeout=10,this.systemSettings=n,this.systemInterface=new u.SystemInterface(new i,new o,new s,new l,new r(c,"Anvato Web Player",d),new a(u)),this.systemFactory=new u.SystemFactory(this.systemInterface,this.systemSettings),this.clientSettings=new u.ClientSettings(this.config.customerKey),void 0!==this.config.heartbeatInterval&&(this.clientSettings.heartbeatInterval=parseInt(this.config.heartbeatInterval)),void 0!==c.gatewayUrl&&(this.clientSettings.gatewayUrl=c.gatewayUrl),this.client=new u.Client(this.clientSettings,this.systemFactory),this.playerStateManager=this.client.getPlayerStateManager(),this.anvatoInterface=new E(u,_,this.playerStateManager,this.client,this.config),!function(e){for(var t,n=["customerKey"],a=0;a<n.length;a++)if(!(t=n[a])||"string"!=typeof t||!t.length)return!1;return!0}(this.config)?_("Error, missing required configuration"):e()},d.prototype.sendBeacon=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0];t[1],t[2],t[3];"PRESENTATION_UPDATED"!==a&&this.trackEvent.apply(this,t)},d.prototype.updateTime=function(e,t,n){this.trackedPlayhead=e,this.anvatoInterface.updateTime(e,t,n)},d.prototype.destroy=function(){this.anvatoInterface.destroy(),this.client.release(),this.client=null,this.systemFactory.release(),this.systemFactory=null},d.prototype.trackEvent=function(e,t,n,a){this.anvatoInterface.sendBeacon(e,t,n,a)},n.registerCustomPlugin(new d)}(window.anvp,window.localStorage)},45:function(e,t){e.exports=!1},47:function(e,t,n){var a=n(29),r=Math.max,i=Math.min;e.exports=function(e,t){var n=a(e);return n<0?r(n+t,0):i(n,t)}},48:function(e,t,n){var a,r=n(5),i=n(131),o=n(69),s=n(55),c=n(111),l=n(74),u=n(58),_=u("IE_PROTO"),d=function(){},E=function(e){return"<script>"+e+"<\/script>"},f=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;f=a?function(e){e.write(E("")),e.close();var t=e.parentWindow.Object;return e=null,t}(a):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(E("document.F=Object")),e.close(),e.F);for(var n=o.length;n--;)delete f.prototype[o[n]];return f()};s[_]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=r(e),n=new d,d.prototype=null,n[_]=e):n=f(),void 0===t?n:i(n,t)}},49:function(e,t){e.exports={}},5:function(e,t,n){var a=n(6);e.exports=function(e){if(!a(e))throw TypeError(String(e)+" is not an object");return e}},52:function(e,t,n){var a=n(9).f,r=n(7),i=n(3)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,i)&&a(e,i,{configurable:!0,value:t})}},53:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},55:function(e,t){e.exports={}},56:function(e,t,n){var a=n(53);e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,r){return e.call(t,n,a,r)}}return function(){return e.apply(t,arguments)}}},57:function(e,t,n){var a=n(2),r=n(3),i=n(77),o=r("species");e.exports=function(e){return i>=51||!a((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},58:function(e,t,n){var a=n(71),r=n(59),i=a("keys");e.exports=function(e){return i[e]||(i[e]=r(e))}},59:function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+a).toString(36)}},6:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},60:function(e,t,n){var a=n(26);e.exports=Array.isArray||function(e){return"Array"==a(e)}},61:function(e,t,n){var a=n(5),r=n(53),i=n(3)("species");e.exports=function(e,t){var n,o=a(e).constructor;return void 0===o||null==(n=a(o)[i])?t:r(n)}},62:function(e,t,n){var a=n(2),r=/#|\.prototype\./,i=function(e,t){var n=s[o(e)];return n==l||n!=c&&("function"==typeof t?a(t):!!t)},o=i.normalize=function(e){return String(e).replace(r,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",l=i.POLYFILL="P";e.exports=i},63:function(e,t,n){"use strict";var a=n(43),r=n(9),i=n(42);e.exports=function(e,t,n){var o=a(t);o in e?r.f(e,o,i(0,n)):e[o]=n}},64:function(e,t,n){var a=n(2),r=n(26),i="".split;e.exports=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?i.call(e,""):Object(e)}:Object},65:function(e,t,n){var a=n(25),r=n(8),i=n(47),o=function(e){return function(t,n,o){var s,c=a(t),l=r(c.length),u=i(o,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},66:function(e,t,n){var a=n(5),r=n(139);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return a(n),r(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},67:function(e,t,n){var a=n(70),r=n(26),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=a?r:function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},68:function(e,t,n){var a=n(1),r=n(15);e.exports=function(e,t){try{r(a,e,t)}catch(n){a[e]=t}return t}},69:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},70:function(e,t,n){var a={};a[n(3)("toStringTag")]="z",e.exports="[object z]"===String(a)},71:function(e,t,n){var a=n(45),r=n(98);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},72:function(e,t,n){var a=n(2);e.exports=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())}))},73:function(e,t,n){"use strict";var a=n(2);e.exports=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))}},74:function(e,t,n){var a=n(1),r=n(6),i=a.document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},75:function(e,t,n){var a=n(98),r=Function.toString;"function"!=typeof a.inspectSource&&(a.inspectSource=function(e){return r.call(e)}),e.exports=a.inspectSource},76:function(e,t,n){var a=n(99),r=n(69);e.exports=Object.keys||function(e){return a(e,r)}},77:function(e,t,n){var a,r,i=n(1),o=n(101),s=i.process,c=s&&s.versions,l=c&&c.v8;l?r=(a=l.split("."))[0]+a[1]:o&&(!(a=o.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=o.match(/Chrome\/(\d+)/))&&(r=a[1]),e.exports=r&&+r},8:function(e,t,n){var a=n(29),r=Math.min;e.exports=function(e){return e>0?r(a(e),9007199254740991):0}},81:function(e,t,n){var a=n(6),r=n(60),i=n(3)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?a(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},82:function(e,t,n){"use strict";var a=n(38),r=n(9),i=n(3),o=n(10),s=i("species");e.exports=function(e){var t=a(e),n=r.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},83:function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},88:function(e,t,n){"use strict";var a=n(5);e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},9:function(e,t,n){var a=n(10),r=n(97),i=n(5),o=n(43),s=Object.defineProperty;t.f=a?s:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},92:function(e,t,n){var a=n(67),r=n(49),i=n(3)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||r[a(e)]}},93:function(e,t,n){"use strict";var a={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!a.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:a},94:function(e,t,n){var a=n(6),r=n(66);e.exports=function(e,t,n){var i,o;return r&&"function"==typeof(i=t.constructor)&&i!==n&&a(o=i.prototype)&&o!==n.prototype&&r(e,o),e}},95:function(e,t,n){var a=n(3)("iterator"),r=!1;try{var i=0,o={next:function(){return{done:!!i++}},return:function(){r=!0}};o[a]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var i={};i[a]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},97:function(e,t,n){var a=n(10),r=n(2),i=n(74);e.exports=!a&&!r((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},98:function(e,t,n){var a=n(1),r=n(68),i=a["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=i},99:function(e,t,n){var a=n(7),r=n(25),i=n(65).indexOf,o=n(55);e.exports=function(e,t){var n,s=r(e),c=0,l=[];for(n in s)!a(o,n)&&a(s,n)&&l.push(n);for(;t.length>c;)a(s,n=t[c++])&&(~i(l,n)||l.push(n));return l}}});